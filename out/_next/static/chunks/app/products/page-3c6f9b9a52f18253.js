(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[571],{1896:(e,t,a)=>{Promise.resolve().then(a.bind(a,6856))},6856:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>f});var s=a(5155),r=a(4295),n=a(2115),l=a(3546),i=a(4416),o=a(505),c=a(7428),d=a(760),u=a(1471),p=a(9434),m=a(6313),h=a(6440);let x=e=>{let{products:t,onCategorySelect:a}=e,r=t.map(e=>{var t;return null===(t=e.categoria)||void 0===t?void 0:t.name}).filter((e,t,a)=>e&&a.indexOf(e)===t);return(0,s.jsx)("div",{className:"w-full overflow-hidden bg-[#022953] py-2 relative",children:(0,s.jsx)(h.A,{speed:40,pauseOnHover:!0,gradient:!1,className:"text-white font-semibold text-sm sm:text-base",children:r.map((e,t)=>(0,s.jsx)("span",{className:"inline-block mx-6 cursor-pointer hover:text-yellow-300 transition-colors",onClick:()=>e&&a(e),children:e},"".concat(t,"-").concat(e)))})})};function g(e,t){let a=(0,p.f)(e),s=(0,p.f)(t),r=function(e,t){let a=e.length,s=t.length,r=Array(a+1).fill(null).map(()=>Array(s+1).fill(0));for(let e=0;e<=a;e++)r[e][0]=e;for(let e=0;e<=s;e++)r[0][e]=e;for(let n=1;n<=a;n++)for(let a=1;a<=s;a++)e[n-1]===t[a-1]?r[n][a]=r[n-1][a-1]:r[n][a]=Math.min(r[n-1][a]+1,r[n][a-1]+1,r[n-1][a-1]+1);return r[a][s]}(a,s),n=Math.max(a.length,s.length);return 0===n?1:(n-r)/n}function f(){let[e,t]=(0,n.useState)([]),[a,h]=(0,n.useState)(""),[f,v]=(0,n.useState)([]),[b,j]=(0,n.useState)(!1),[w,y]=(0,n.useState)(!1),N=(0,l.R)(e=>e.setBrand),C=(0,l.R)(e=>e.setAvailable),k=(0,l.R)(e=>e.setMinPrice),A=(0,l.R)(e=>e.setMaxPrice),F=(0,l.R)(e=>e.setName),S=(0,l.R)(e=>e.setCategory),[D,R]=(0,n.useState)(!0);(0,n.useEffect)(()=>{let e=new URLSearchParams(window.location.search).get("category");e&&S(decodeURIComponent(e))},[S]),(0,n.useEffect)(()=>{(async function(){try{let e=await fetch("https://app.fadiar.com/api/get_location",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});await e.json(),h("US")}catch(e){h("CU")}try{let e=await fetch("".concat("https://app.fadiar.com/api","/inventory")),a=await e.json();console.log(a.products),t(a.products),v(a.currencys.currencys)}catch(e){throw t([]),Error("Failed to fetch products")}finally{R(!1)}})()},[]);let{name:E,brand:M,available:P,minPrice:U,maxPrice:I,category:z}=(0,l.R)(),O=(0,n.useMemo)(()=>e.filter(e=>{var t;let s=!E||(0,p.d)(E,e.name),r=!M||(0,p.d)(M,e.brand),n="available"===P?e.count>0:"out"!==P||e.count<=0,l=!z||(null===(t=e.categoria)||void 0===t?void 0:t.name)&&(0,p.f)(z)===(0,p.f)(e.categoria.name),i=0;"CU"===a&&"CUP"===e.prices[0][2]?i=e.prices[0][3]||e.prices[0][1]:"CU"!==a&&"USD"===e.prices[0][2]?i=e.prices[0][3]||e.prices[0][1]:"CU"===a&&"USD"===e.prices[0][2]?i=(e.prices[0][3]||e.prices[0][1])*f[1].value:"CU"!==a&&"CUP"===e.prices[0][2]&&(i=Math.ceil((e.prices[0][3]||e.prices[0][1])/f[1].value*100)/100);let o=(!U||i>=U)&&(!I||i<=I);return s&&r&&n&&o&&l}),[e,E,M,P,U,I,z,a,f]),_=()=>{F(""),N(""),C(""),k(0),A(1e6),S("")},L=(0,n.useMemo)(()=>{if(!E||E.length<2)return[];let t=(0,p.f)(E);return e.filter(e=>!O.some(t=>t.id===e.id)).map(e=>{var a,s;let r=(0,p.f)("".concat(e.name," ").concat(e.brand," ").concat(e.model," ").concat(e.description)),n=(null===(a=e.categoria)||void 0===a?void 0:a.name)?(0,p.f)(e.categoria.name):"",l=+!!"".concat(r," ").concat(n).includes(t),i=function(e,t){let a=(0,p.f)(e),s=(0,p.f)(t);return a===s?1:s.includes(a)?.9:a.includes(s)?.7:g(a,s)}(t,e.name),o=g(t,(0,p.f)(e.brand)),c=(null===(s=e.categoria)||void 0===s?void 0:s.name)?g(t,(0,p.f)(e.categoria.name)):0,d=0;return l>0&&(d+=50),{product:e,score:d+=40*i+20*o+15*c}}).filter(e=>e.score>.1).sort((e,t)=>t.score-e.score).slice(0,6).map(e=>e.product)},[E,e,O]);return D?(0,s.jsx)(c.A,{}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x,{products:e,onCategorySelect:S}),(0,s.jsxs)("div",{className:"flex flex-col relative w-full py-6 px-4 sm:px-8 space-y-6",children:[(0,s.jsx)(d.N,{children:b&&(0,s.jsx)(u.P.div,{initial:{y:300,opacity:0},animate:{y:0,opacity:1},exit:{y:300,opacity:0},transition:{duration:.3,ease:"easeInOut"},className:"fixed flex -bottom-6 left-0 w-full z-50 justify-center",children:(0,s.jsxs)("div",{className:"flex flex-col lg:w-1/3 sm:w-2/3 w-full h-full bg-white rounded-t-lg p-4 shadow-[0_-10px_25px_-5px_rgba(0,0,0,0.3)] border-2 gap-4",children:[(0,s.jsxs)("div",{className:"flex w-full",children:[(0,s.jsx)("h3",{className:"text-xl text-[#022953] font-bold",children:"Filtros"}),(0,s.jsx)("button",{className:"ml-auto w-6 h-6",onClick:()=>j(!1),children:(0,s.jsx)(i.A,{})})]}),(0,s.jsx)("div",{className:"relative",children:(0,s.jsxs)("select",{className:"w-full p-2 pr-10 border-2 border-gray-300 rounded-md bg-white",onChange:e=>C(e.target.value),value:P,style:{backgroundImage:'url("data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23007CB2%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E")',backgroundRepeat:"no-repeat",backgroundPosition:"right 0.7rem top 50%",backgroundSize:"0.65rem auto",paddingRight:"2.5rem",appearance:"none",WebkitAppearance:"none",MozAppearance:"none"},children:[(0,s.jsx)("option",{value:"",children:"Disponibles y agotados"}),(0,s.jsx)("option",{value:"available",children:"Disponibles"}),(0,s.jsx)("option",{value:"out",children:"Agotados"})]})}),(0,s.jsx)("div",{className:"relative",children:(0,s.jsxs)("select",{className:"w-full p-2 pr-10 border-2 border-gray-300 rounded-md bg-white",onChange:e=>S(e.target.value),value:z,style:{backgroundImage:'url("data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23007CB2%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E")',backgroundRepeat:"no-repeat",backgroundPosition:"right 0.7rem top 50%",backgroundSize:"0.65rem auto",paddingRight:"2.5rem",appearance:"none",WebkitAppearance:"none",MozAppearance:"none"},children:[(0,s.jsx)("option",{value:"",children:"Todas las categor\xedas"}),e.map(e=>{var t;return null===(t=e.categoria)||void 0===t?void 0:t.name}).filter((e,t,a)=>e&&a.indexOf(e)===t).map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})}),(0,s.jsx)("div",{className:"relative",children:(0,s.jsxs)("select",{className:"w-full p-2 pr-10 border-2 border-gray-300 rounded-md bg-white",onChange:e=>N(e.target.value),value:M,style:{backgroundImage:'url("data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23007CB2%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E")',backgroundRepeat:"no-repeat",backgroundPosition:"right 0.7rem top 50%",backgroundSize:"0.65rem auto",paddingRight:"2.5rem",appearance:"none",WebkitAppearance:"none",MozAppearance:"none"},children:[(0,s.jsx)("option",{value:"",children:"Todas las marcas"}),e.map(e=>e.brand).filter((e,t,a)=>a.indexOf(e)===t).map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})}),(0,s.jsxs)("div",{className:"flex p-2 border-2 border-gray-300 rounded-md gap-2 items-center",children:[(0,s.jsx)("span",{className:"flex flex-nowrap w-full",children:"Rango de precios"}),(0,s.jsx)("input",{type:"number",className:"flex w-18 text-right",value:U,onChange:e=>k(Number(e.target.value))}),(0,s.jsx)("span",{children:"-"}),(0,s.jsx)("input",{type:"number",className:"flex w-18",value:I,onChange:e=>A(Number(e.target.value))})]}),(0,s.jsx)("button",{onClick:_,className:"flex w-full items-center justify-center font-bold text-white hover:bg-blue-900 p-2 bg-[#022953]",children:"Reiniciar filtros"})]})})}),(0,s.jsxs)("div",{className:"flex w-full items-center",children:[(0,s.jsx)("h1",{className:"flex font-bold sm:text-3xl text-xl text-[#022953]",children:"Cat\xe1logo de productos"}),(0,s.jsxs)("div",{className:"flex gap-2 ml-auto",children:[(0,s.jsx)(d.N,{mode:"wait",children:(""!==E||""!==M||""!==P||""!==z||U>0||I<1e6)&&(0,s.jsxs)(u.P.button,{initial:{opacity:0,scale:.8,x:-20},animate:{opacity:1,scale:1,x:0},exit:{opacity:0,scale:.8,x:-20},transition:{duration:.3,ease:"easeInOut",type:"spring",stiffness:300,damping:25},onClick:_,className:"flex items-center justify-center px-2 py-1 rounded-md bg-gray-500 text-white gap-2 hover:scale-110 transition-all duration-300",children:[(0,s.jsx)("span",{children:(0,s.jsx)(i.A,{})}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Limpiar"})]})}),(0,s.jsxs)("button",{onClick:()=>j(!b),className:"flex items-center justify-center px-2 py-1 rounded-md bg-[#022953] text-white gap-2 hover:scale-110 transition-all duration-300",children:[(0,s.jsx)("span",{children:(0,s.jsx)(o.A,{})}),(0,s.jsx)("span",{children:"Filtros"})]})]})]}),(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-6",children:O.length>0?O.sort((e,t)=>(t.count>0?1:-1)-(e.count>0?1:-1)).map(e=>(0,s.jsx)(r.A,{product:e,location:a,currencies:f,onAuthRequired:()=>y(!0),oldPrice:e.prices[0][1]},e.id)):(0,s.jsxs)("div",{className:"col-span-full flex flex-col items-center justify-center py-12 text-center",children:[(0,s.jsx)("div",{className:"text-gray-400 mb-4",children:(0,s.jsx)("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"No se encontraron productos"}),(0,s.jsx)("p",{className:"text-gray-500 mb-4",children:"Intenta ajustar los filtros o usar t\xe9rminos de b\xfasqueda diferentes"}),(0,s.jsx)("button",{onClick:_,className:"px-4 py-2 bg-[#022953] text-white rounded-md hover:bg-[#011a3a] transition-colors",children:"Limpiar filtros"})]})}),E&&E.length>=2&&L.length>0&&(0,s.jsxs)("div",{className:"mt-8",children:[(0,s.jsxs)("div",{className:"flex items-center mb-4",children:[(0,s.jsxs)("h2",{className:"text-xl font-bold text-[#022953]",children:['Productos recomendados para "',E,'"']}),(0,s.jsxs)("div",{className:"ml-2 px-2 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded-full",children:[L.length," sugerencias"]})]}),(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-6",children:L.sort((e,t)=>(t.count>0?1:-1)-(e.count>0?1:-1)).map(e=>(0,s.jsx)(r.A,{product:e,location:a,currencies:f,onAuthRequired:()=>y(!0),oldPrice:e.prices[0][1]},"recommended-".concat(e.id)))})]})]}),(0,s.jsx)("div",{className:"flex justify-center mt-8 mb-12",children:(0,s.jsxs)("button",{onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},className:"flex items-center gap-2 bg-[#022953] hover:bg-blue-900 text-white font-medium py-2 px-6 rounded-lg shadow-md transition-colors",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 10l7-7m0 0l7 7m-7-7v18"})}),"Volver arriba"]})}),(0,s.jsx)(m.A,{isOpen:w,onClose:()=>y(!1)})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[874,277,676,805,939,393,441,684,358],()=>t(1896)),_N_E=e.O()}]);