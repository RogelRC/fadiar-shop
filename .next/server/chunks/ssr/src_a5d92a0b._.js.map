{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://D%3A/Projects/fadiar-shop/src/components/FinalCartItem.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { Minus, Plus, Trash2 } from \"lucide-react\";\r\nimport { useState, useEffect, useMemo } from \"react\";\r\nimport Image from \"next/image\";\r\nimport { useCart } from \"@/store/Cart\";\r\n\r\nexport default function FinalCartItem({\r\n  item,\r\n  location,\r\n  currencies,\r\n  onTotalChange, // Nuevo prop\r\n}: {\r\n  item: any;\r\n  location: string;\r\n  currencies: any[];\r\n  onTotalChange?: (total: number) => void; // Tipo del callback\r\n}) {\r\n  const [quantity, setQuantity] = useState(item.en_carrito);\r\n  const [visible, setVisible] = useState(true);\r\n  const [prevQuantity, setPrevQuantity] = useState(item.en_carrito);\r\n  const [buttonDisable, setButtonDisabled] = useState(false);\r\n  const setAmount = useCart((state) => state.setAmount);\r\n  const { amount } = useCart();\r\n\r\n  const price = useMemo(() => {\r\n    let calculatedPrice = 0;\r\n    if (location === \"CU\" && item.prices[0][2] === \"CUP\") {\r\n      calculatedPrice = item.prices[0][1];\r\n    } else if (location !== \"CU\" && item.prices[0][2] === \"USD\") {\r\n      calculatedPrice = item.prices[0][1];\r\n    } else if (location === \"CU\" && item.prices[0][2] === \"USD\") {\r\n      calculatedPrice = item.prices[0][1] * currencies[1]?.value || 0;\r\n    } else if (location !== \"CU\" && item.prices[0][2] === \"CUP\") {\r\n      calculatedPrice =\r\n        Math.ceil((item.prices[0][1] / currencies[1]?.value) * 100) / 100 || 0;\r\n    }\r\n    return calculatedPrice;\r\n  }, [location, currencies, item.prices]);\r\n\r\n  // Efecto para notificar cambios en el total\r\n  useEffect(() => {\r\n    if (onTotalChange) {\r\n      const total = price * quantity;\r\n      onTotalChange(total);\r\n    }\r\n  }, [quantity]);\r\n\r\n  useEffect(() => {\r\n    const updateCart = async () => {\r\n      try {\r\n        const body = JSON.stringify({\r\n          id_user_action:\r\n            JSON.parse(localStorage.getItem(\"userData\") || \"{}\").userId || null,\r\n          id_user:\r\n            JSON.parse(localStorage.getItem(\"userData\") || \"{}\").userId || null,\r\n          id_product: item.id,\r\n          newCount: quantity,\r\n        });\r\n\r\n        const response = await fetch(\r\n          `${process.env.NEXT_PUBLIC_API_URL}/modificar_cantidad_producto_carrito`,\r\n          {\r\n            method: \"POST\",\r\n            headers: {\r\n              \"Content-Type\": \"application/json\",\r\n            },\r\n            body,\r\n          },\r\n        );\r\n\r\n        if (!response.ok) {\r\n          setQuantity(prevQuantity);\r\n          throw new Error(\"Error al actualizar el carrito\");\r\n        }\r\n\r\n        console.log(await response.json());\r\n\r\n        setPrevQuantity(quantity);\r\n      } catch (error) {\r\n        console.error(\"Error actualizando el carrito:\", error);\r\n      }\r\n    };\r\n\r\n    const deleteItem = async () => {\r\n      try {\r\n        const body = JSON.stringify({\r\n          id_user_action:\r\n            JSON.parse(localStorage.getItem(\"userData\") || \"{}\").userId || null,\r\n          id_user:\r\n            JSON.parse(localStorage.getItem(\"userData\") || \"{}\").userId || null,\r\n          id_product: item.id,\r\n        });\r\n        const response = await fetch(\r\n          `${process.env.NEXT_PUBLIC_API_URL}/eliminar_producto_carrito`,\r\n          {\r\n            method: \"POST\",\r\n            headers: {\r\n              \"Content-Type\": \"application/json\",\r\n            },\r\n            body,\r\n          },\r\n        );\r\n        if (!response.ok) {\r\n          throw new Error(\"Error al eliminar el item del carrito\");\r\n        }\r\n        window.dispatchEvent(new Event(\"cartDataChanged\"));\r\n      } catch (error) {\r\n        console.error(\"Error eliminando el item del carrito:\", error);\r\n      }\r\n    };\r\n\r\n    quantity > 0 ? updateCart() : deleteItem();\r\n  }, [quantity]);\r\n\r\n  function handleSetQuantity(q: number) {\r\n    if (q == quantity - 1) {\r\n      setAmount(amount - 1);\r\n    } else if (q == quantity + 1) {\r\n      setAmount(amount + 1);\r\n    }\r\n\r\n    setQuantity(q);\r\n    if (q <= 0) setVisible(false);\r\n    setButtonDisabled(true);\r\n    setTimeout(() => {\r\n      setButtonDisabled(false);\r\n    }, 3000); // Habilitar nuevamente después de 3 segundos\r\n  }\r\n\r\n  // Función para eliminar directamente el producto del carrito\r\n  const handleDeleteItem = async () => {\r\n    try {\r\n      setButtonDisabled(true);\r\n      \r\n      const body = JSON.stringify({\r\n        id_user_action:\r\n          JSON.parse(localStorage.getItem(\"userData\") || \"{}\").userId || null,\r\n        id_user:\r\n          JSON.parse(localStorage.getItem(\"userData\") || \"{}\").userId || null,\r\n        id_product: item.id,\r\n      });\r\n\r\n      const response = await fetch(\r\n        `${process.env.NEXT_PUBLIC_API_URL}/eliminar_producto_carrito`,\r\n        {\r\n          method: \"POST\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n          body,\r\n        }\r\n      );\r\n\r\n      if (!response.ok) {\r\n        throw new Error(\"Error al eliminar el producto del carrito\");\r\n      }\r\n\r\n      // Actualizar el total a pagar\r\n      if (onTotalChange) {\r\n        onTotalChange(0); // El producto se eliminó, su contribución al total es 0\r\n      }\r\n\r\n      // Actualizar la cantidad en el store\r\n      setAmount(amount - quantity);\r\n\r\n      // Ocultar el componente\r\n      setVisible(false);\r\n\r\n      // Disparar evento para actualizar el carrito\r\n      window.dispatchEvent(new Event(\"cartDataChanged\"));\r\n\r\n      console.log(\"Producto eliminado exitosamente\");\r\n    } catch (error) {\r\n      console.error(\"Error eliminando el producto del carrito:\", error);\r\n    } finally {\r\n      setButtonDisabled(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {visible && (\r\n        <div className=\"flex w-full h-28 bg-white\">\r\n          <div className=\"flex-shrink-0 h-full aspect-square overflow-hidden p-1\">\r\n            <Image\r\n              src={`${process.env.NEXT_PUBLIC_API_URL}/${item.img}`}\r\n              alt={item.name}\r\n              width={200}\r\n              height={200}\r\n              className=\"w-full h-full object-cover\"\r\n            />\r\n          </div>\r\n          <div className=\"flex flex-col w-full max-w-full text-sm p-2 text-[#9f9f9f]\">\r\n            <span className=\"flex w-full font-semibold\">{item.name}</span>\r\n            <span className=\"flex w-full text-sm\">Marca {item.brand}</span>\r\n            <div className=\"flex flex-1\">\r\n              <span className=\"flex font-bold mt-auto text-[#022953]\">\r\n                {location === \"CU\" && item.prices[0][2] === \"CUP\" && (\r\n                  <>{item.prices[0][1]} CUP</>\r\n                )}\r\n                {location !== \"CU\" && item.prices[0][2] === \"USD\" && (\r\n                  <>{item.prices[0][1]} USD</>\r\n                )}\r\n                {location === \"CU\" && item.prices[0][2] === \"USD\" && (\r\n                  <>{item.prices[0][1] * currencies[1].value} CUP</>\r\n                )}\r\n                {location !== \"CU\" && item.prices[0][2] === \"CUP\" && (\r\n                  <>\r\n                    {Math.ceil(\r\n                      (item.prices[0][1] / currencies[1].value) * 100,\r\n                    ) / 100}{\" \"}\r\n                    USD\r\n                  </>\r\n                )}\r\n              </span>\r\n\r\n              <div className=\"flex ml-auto items-end\">\r\n                <div className=\"flex items-center gap-1 mr-2\">\r\n                  <button\r\n                    onClick={() => handleSetQuantity(quantity - 1)}\r\n                    className={`text-[#022953] rounded-sm transition-all duration-300 ${buttonDisable === false ? \"hover:text-white hover:bg-[#022953]\" : \"cursor-wait\"}`}\r\n                    disabled={buttonDisable}\r\n                  >\r\n                    <Minus />\r\n                  </button>\r\n                  <input\r\n                    type=\"number\"\r\n                    className=\"flex w-16 border-gray-300 border-2 rounded-sm text-[#022953] text-center\"\r\n                    value={quantity}\r\n                    onChange={() => handleSetQuantity(quantity)}\r\n                    disabled={true}\r\n                  />\r\n                  <button\r\n                    onClick={() => handleSetQuantity(quantity + 1)}\r\n                    className={`text-[#022953] rounded-sm transition-all duration-300 ${buttonDisable === false ? \"hover:text-white hover:bg-[#022953]\" : \"cursor-wait\"}`}\r\n                    disabled={buttonDisable}\r\n                  >\r\n                    <Plus />\r\n                  </button>\r\n                </div>\r\n                <button\r\n                  onClick={handleDeleteItem}\r\n                  className={`text-red-500 hover:text-red-600 rounded-sm transition-all duration-300 p-1 ${buttonDisable === false ? \"hover:bg-red-50\" : \"cursor-wait\"}`}\r\n                  disabled={buttonDisable}\r\n                  title=\"Eliminar producto\"\r\n                >\r\n                  <Trash2 size={14} />\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 338, "column": 0}, "map": {"version":3,"sources":["file://D%3A/Projects/fadiar-shop/src/app/checkout/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport FinalCartItem from \"@/components/FinalCartItem\";\nimport { UserRound, Check, X } from \"lucide-react\";\nimport { useRouter } from \"next/navigation\";\nimport { useCart } from \"@/store/Cart\";\n\nconst provinciasCuba = {\n  \"Pinar del Río\": [\n    \"Pinar del Río\",\n    \"Consolación del Sur\",\n    \"Guane\",\n    \"La Palma\",\n    \"Los Palacios\",\n    \"Mantua\",\n    \"Minas de Matahambre\",\n    \"San Juan y Martínez\",\n    \"San Luis\",\n    \"Sandino\",\n    \"Viñales\",\n  ],\n  Artemisa: [\n    \"Artemisa\",\n    \"Alquízar\",\n    \"Bauta\",\n    \"Caimito\",\n    \"Guanajay\",\n    \"Güira de Melena\",\n    \"Mariel\",\n    \"San Antonio de los Baños\",\n    \"Bahía Honda\",\n    \"Candelaria\",\n    \"San Cristóbal\",\n  ],\n  \"La Habana\": [\n    \"Arroyo Naranjo\",\n    \"Boyeros\",\n    \"Centro Habana\",\n    \"Cerro\",\n    \"Cotorro\",\n    \"Diez de Octubre\",\n    \"Guanabacoa\",\n    \"Habana del Este\",\n    \"Habana Vieja\",\n    \"La Lisa\",\n    \"Marianao\",\n    \"Playa\",\n    \"Plaza de la Revolución\",\n    \"Regla\",\n    \"San Miguel del Padrón\",\n  ],\n  Mayabeque: [\n    \"Batabanó\",\n    \"Bejucal\",\n    \"Güines\",\n    \"Jaruco\",\n    \"Madruga\",\n    \"Melena del Sur\",\n    \"Nueva Paz\",\n    \"Quivicán\",\n    \"San José de las Lajas\",\n    \"Santa Cruz del Norte\",\n  ],\n  Matanzas: [\n    \"Cárdenas\",\n    \"Ciénaga de Zapata\",\n    \"Colón\",\n    \"Jagüey Grande\",\n    \"Jovellanos\",\n    \"Limonar\",\n    \"Los Arabos\",\n    \"Martí\",\n    \"Matanzas\",\n    \"Pedro Betancourt\",\n    \"Perico\",\n    \"Unión de Reyes\",\n  ],\n  Cienfuegos: [\n    \"Aguada de Pasajeros\",\n    \"Cienfuegos\",\n    \"Cruces\",\n    \"Cumanayagua\",\n    \"Lajas\",\n    \"Palmira\",\n    \"Rodas\",\n  ],\n  \"Villa Clara\": [\n    \"Caibarién\",\n    \"Camajuaní\",\n    \"Cifuentes\",\n    \"Corralillo\",\n    \"Encrucijada\",\n    \"Manicaragua\",\n    \"Placetas\",\n    \"Quemado de Güines\",\n    \"Ranchuelo\",\n    \"Remedios\",\n    \"Sagua la Grande\",\n    \"Santa Clara\",\n    \"Santo Domingo\",\n  ],\n  \"Sancti Spíritus\": [\n    \"Cabaiguán\",\n    \"Fomento\",\n    \"Jatibonico\",\n    \"La Sierpe\",\n    \"Sancti Spíritus\",\n    \"Taguasco\",\n    \"Trinidad\",\n    \"Yaguajay\",\n  ],\n  \"Ciego de Ávila\": [\n    \"Baraguá\",\n    \"Bolivia\",\n    \"Ciego de Ávila\",\n    \"Chambas\",\n    \"Ciro Redondo\",\n    \"Florencia\",\n    \"Majagua\",\n    \"Morón\",\n    \"Primero de Enero\",\n    \"Venezuela\",\n  ],\n  Camagüey: [\n    \"Camagüey\",\n    \"Carlos Manuel de Céspedes\",\n    \"Esmeralda\",\n    \"Florida\",\n    \"Guaimaro\",\n    \"Jimaguayú\",\n    \"Minas\",\n    \"Najasa\",\n    \"Nuevitas\",\n    \"Santa Cruz del Sur\",\n    \"Sibanicú\",\n    \"Sierra de Cubitas\",\n    \"Vertientes\",\n  ],\n  \"Las Tunas\": [\n    \"Amancio\",\n    \"Colombia\",\n    \"Jesús Menéndez\",\n    \"Jobabo\",\n    \"Las Tunas\",\n    \"Majibacoa\",\n    \"Manatí\",\n    \"Puerto Padre\",\n  ],\n  Holguín: [\n    \"Antilla\",\n    \"Báguanos\",\n    \"Banes\",\n    \"Cacocum\",\n    \"Calixto García\",\n    \"Cueto\",\n    \"Frank País\",\n    \"Gibara\",\n    \"Holguín\",\n    \"Mayarí\",\n    \"Moa\",\n    \"Rafael Freyre\",\n    \"Sagua de Tánamo\",\n    \"Urbano Noris\",\n  ],\n  Granma: [\n    \"Bartolomé Masó\",\n    \"Bayamo\",\n    \"Buey Arriba\",\n    \"Campechuela\",\n    \"Cauto Cristo\",\n    \"Guisa\",\n    \"Jiguaní\",\n    \"Manzanillo\",\n    \"Media Luna\",\n    \"Niquero\",\n    \"Pilón\",\n    \"Río Cauto\",\n    \"Yara\",\n  ],\n  \"Santiago de Cuba\": [\n    \"Contramaestre\",\n    \"Guamá\",\n    \"Mella\",\n    \"Palma Soriano\",\n    \"San Luis\",\n    \"Santiago de Cuba\",\n    \"Segundo Frente\",\n    \"Songo - La Maya\",\n    \"Tercer Frente\",\n  ],\n  Guantánamo: [\n    \"Baracoa\",\n    \"Caimanera\",\n    \"El Salvador\",\n    \"Guantánamo\",\n    \"Imías\",\n    \"Maisí\",\n    \"Manuel Tames\",\n    \"Niceto Pérez\",\n    \"San Antonio del Sur\",\n    \"Yateras\",\n  ],\n  \"Isla de la Juventud\": [\"Isla de la Juventud\"],\n};\n\nasync function fetchCartItems(userData: any) {\n  if (!userData) {\n    console.log(\"No tengo datos\");\n    return {};\n  }\n\n  try {\n    const body = JSON.stringify({\n      id_user_action: userData.userId,\n      id_user: userData.userId,\n      comisiones: false,\n    });\n\n    const response = await fetch(\n      `${process.env.NEXT_PUBLIC_API_URL}/obtener_productos_carrito`,\n      {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: body,\n      },\n    );\n\n    if (!response.ok) {\n      throw new Error(\"Error al cargar el carrito\");\n    }\n\n    const data = await response.json();\n    console.log(data);\n    return data;\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nasync function getLocation() {\n  try {\n    const res = await fetch(\"https://app.fadiar.com/api/get_location\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({}),\n    });\n    const data = await res.json();\n    return !data.country || data.country === \"Cuba\" ? \"CU\" : \"US\";\n  } catch (error) {\n    console.error(\"Error obteniendo la ubicación:\", error);\n    return \"US\";\n  }\n}\n\nexport default function CheckoutPage() {\n  const router = useRouter();\n  const setAmount = useCart((state) => state.setAmount);\n\n  // State for cart and UI\n  const [cartItems, setCartItems] = useState<any[] | null>(null); // null means loading, [] means loaded but empty\n  const [currencies, setCurrencies] = useState<any[]>([]); // Estado para almacenar la moneda actual\n  const [location, setLocation] = useState<string>(\"US\");\n  const [itemTotals, setItemTotals] = useState<{ [key: string]: number }>({});\n  const [delivery, setDelivery] = useState(0);\n  const [isExpanded, setIsExpanded] = useState(false);\n  const [isAnimating, setIsAnimating] = useState(false);\n  const [tried, setTried] = useState(false);\n  const [error, setError] = useState(\"\");\n  const [useMyAddress, setUseMyAddress] = useState(true);\n  const [addresses, setAddresses] = useState<any[]>([]);\n  const [selectedAddress, setSelectedAddress] = useState<number | null>(null);\n\n  // Form state\n  const [formData, setFormData] = useState({\n    provincia: \"\",\n    municipio: \"\",\n    direccionExacta: \"\",\n    phone: \"\",\n    ci_cliente: \"\"\n  });\n\n  // Form validation state\n  const [validation, setValidation] = useState({\n    provincia: false,\n    municipio: false,\n    direccionExacta: false,\n    phone: false,\n    ci_cliente: false,\n    addressSelected: false\n  });\n\n  const [progress, setProgress] = useState(0);\n\n  // Calculate subtotal using itemTotals\n  const subtotal = Object.values(itemTotals).reduce(\n    (acc, curr) => acc + curr,\n    0,\n  );\n\n  // Add delivery fee if delivery is selected\n  const deliveryFee = delivery === 1 ? 5 : 0;\n  const grandTotal = subtotal + deliveryFee;\n\n  // Uncheck delivery if province is changed to something other than Havana\n  useEffect(() => {\n    if (formData.provincia !== 'La Habana' && delivery === 1) {\n      setDelivery(0);\n      setIsExpanded(false);\n    }\n  }, [formData.provincia, delivery]);\n\n  useEffect(() => {\n    const fetchAddresses = async () => {\n      try {\n        const storedUserData = localStorage.getItem(\"userData\");\n        if (!storedUserData) {\n          router.push(\"/login\");\n          return;\n        }\n        \n        const userData = JSON.parse(storedUserData);\n\n        const response = await fetch(`${process.env.NEXT_PUBLIC_API_URL}/obtener-direccion-domicilio-cliente`, {\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          method: 'POST',\n          body: JSON.stringify({ id_user: userData.userId }),\n        });\n\n        if (!response.ok) {\n          throw new Error('Error al obtener direcciones');\n        }\n\n        const data = await response.json();\n        console.log(await data.listado)\n        setAddresses(data.listado);\n      } catch (error) {\n        console.error('Error fetching addresses:', error);\n      }\n    };\n    fetchAddresses();\n  }, []);\n\n  // Update validation and progress\n  useEffect(() => {\n    const isUsingSavedAddress = useMyAddress && selectedAddress !== null;\n    \n    // Only validate address fields if not using a saved address\n    const addressValid = isUsingSavedAddress || \n      (formData.provincia.trim() !== \"\" && formData.municipio.trim() !== \"\");\n    \n    const newValidation = {\n      provincia: isUsingSavedAddress ? true : formData.provincia.trim() !== \"\",\n      municipio: isUsingSavedAddress ? true : formData.municipio.trim() !== \"\",\n      phone: /^\\+?[0-9\\s-]{8,}$/.test(formData.phone), // At least 8 digits, country code optional\n      ci_cliente: /^\\d{11}$/.test(formData.ci_cliente), // Exactly 11 digits\n      addressSelected: addressValid,\n      direccionExacta: delivery === 1 ? formData.direccionExacta.trim() !== \"\" : true\n    };\n\n    setValidation(prev => ({\n      ...prev,\n      ...newValidation\n    }));\n\n    // Calculate progress\n    const requiredFields = delivery === 1 ? 5 : 4; // Total fields that could be required (including idCard)\n    const validFields = Object.values(newValidation).filter(Boolean).length;\n    const calculatedProgress = Math.min(100, (validFields / (delivery === 1 ? 5 : 4)) * 100);\n    setProgress(calculatedProgress);\n  }, [formData, delivery]);\n\n  const handleSubmit = async () => {\n    setTried(true);\n\n    // Check all required fields\n    const isFormValid =\n      formData.provincia.trim() !== \"\" &&\n      formData.municipio.trim() !== \"\" &&\n      (delivery === 0 || formData.direccionExacta.trim() !== \"\") &&\n      formData.phone.trim() !== \"\" &&\n      /^\\d{11}$/.test(formData.ci_cliente);\n\n    if (!isFormValid) {\n      setError(\"Por favor llene todos los campos obligatorios correctamente\");\n      return;\n    }\n\n    setError(\"\");\n\n    try {\n      const userData =\n        typeof window !== \"undefined\"\n          ? JSON.parse(localStorage.getItem(\"userData\") || \"{}\")\n          : {};\n\n      // Get user details from userData\n      const name = userData.name || \"\";\n      const apellidos_cliente = `${userData.last1 || \"\"} ${userData.last2 || \"\"}`.trim();\n\n      const orderData = {\n        ...formData,\n        name_cliente: name,\n        last_names: apellidos_cliente,\n        cellphone_cliente: formData.phone,\n        id_user_action: userData.userId,\n        id_user: userData.userId,\n        gestor_id: userData.userId,\n        delivery,\n        total: grandTotal,\n        location,\n        items: cartItems?.map((item) => ({\n          id_product: item.id,\n          count: item.count,\n          price: item.prices[0][1],\n          currency: item.prices[0][2],\n        })),\n      };\n\n      console.log(orderData)\n\n      const response = await fetch(\n        `${process.env.NEXT_PUBLIC_API_URL}/add_order`,\n        {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify(orderData),\n        },\n      );\n\n      const data = await response.json();\n\n      console.log('API Response:', data); // Log the full response\n\n      if (!response.ok) {\n        setError(data.message || \"Error al comprar\");\n        return; // Exit early if there's an error\n      }\n\n      if (!data || !data.order || !data.order.date) {\n        console.error('Unexpected API response structure:', data);\n        setError(\"Formato de respuesta inesperado del servidor\");\n        return;\n      }\n\n      setAmount(0);\n\n      const orderParams = new URLSearchParams({\n        date: data.order.date,\n        ...(formData.direccionExacta && {\n          direccionExacta: `${formData.direccionExacta}, ${formData.municipio}, ${formData.provincia}`,\n        }),\n        price: grandTotal.toFixed(2),\n        currency: \"USD\",\n      }).toString();\n\n      router.push(`/checkout/ticket?${orderParams}`);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : \"Error desconocido\");\n    }\n  };\n\n  const handleTotalChange = (itemId: string, total: number) => {\n    setItemTotals((prev) => ({\n      ...prev,\n      [itemId]: total,\n    }));\n  };\n\n  //console.log(currencies);\n\n  useEffect(() => {\n    const fetchCart = async () => {\n      try {\n        const user =\n          typeof window !== \"undefined\"\n            ? await JSON.parse(localStorage.getItem(\"userData\")!)\n            : null;\n        const cartItems = await fetchCartItems(user);\n        const location = await getLocation();\n\n        setCartItems(user ? cartItems.carrito : {});\n        setCurrencies(user ? cartItems.monedas[0].currencys : {});\n        setLocation(\"US\");\n      } catch (error) {\n        console.error(error);\n      }\n    };\n\n    fetchCart();\n  }, []);\n\n  if (cartItems === null) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-white\">\n        <div className=\"text-center\">\n          <div className=\"w-12 h-12 border-4 border-gray-200 border-t-blue-600 rounded-full animate-spin mx-auto mb-4\"></div>\n          <div className=\"text-gray-600 font-medium\">Cargando tu carrito...</div>\n        </div>\n      </div>\n    );\n  }\n\n  if (cartItems.length === 0) {\n    return (\n      <div className=\"flex flex-col items-center justify-center min-h-[calc(100vh-88px)] p-4 bg-white\">\n        <div className=\"text-center max-w-md p-8 bg-[#f4f4f4] rounded-lg shadow-lg\">\n          <h1 className=\"text-2xl font-bold text-[#022953] mb-4\">Tu carrito está vacío</h1>\n          <p className=\"text-gray-600 mb-6\">Aún no has agregado productos a tu carrito. Comienza a explorar nuestros productos y encuentra lo que necesitas.</p>\n          <button\n            onClick={() => router.push('/products')}\n            className=\"w-full bg-[#022953] text-white font-bold py-3 px-6 rounded hover:bg-opacity-90 transition-colors\"\n          >\n            Ver productos\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"flex h-full w-full min-h-[calc(100vh-88px)] justify-center p-4 bg-white\">\n      <div className=\"flex flex-col bg-[#f4f4f4] w-120 md:w-1/2 sm:w-2/3 rounded-lg shadow-lg sm:p-10 p-4 gap-4 sm:gap-6\">\n        <div className=\"w-full\">\n          <h1 className=\"flex font-bold text-xl sm:text-3xl text-[#022953] w-full sm:justify-start justify-center mb-6\">\n            Resumen del carrito\n          </h1>\n        </div>\n        <div className=\"flex flex-col gap-4 sm:gap-6\">\n          {cartItems.map((item) => (\n            <FinalCartItem\n              key={item.id}\n              location={location}\n              item={item}\n              currencies={currencies}\n              onTotalChange={(total) => handleTotalChange(item.id, total)}\n            />\n          ))}\n        </div>\n        <div className=\"flex flex-col w-full gap-2 mt-6\">\n          <div className=\"flex w-full items-center\">\n            <span className=\"flex text-[#9a9a9a]\">Subtotal</span>\n            <span className=\"flex ml-auto text-[#022953] text-lg\">\n              {subtotal.toFixed(2)} {location === \"CU\" ? \"CUP\" : \"USD\"}\n            </span>\n          </div>\n          {delivery === 1 && (\n            <div className=\"flex w-full items-center\">\n              <div className=\"flex flex-col\">\n                <span className=\"text-[#9a9a9a]\">Entrega a domicilio</span>\n                <span className=\"text-xs text-gray-500\">*El precio puede variar según la distancia. Nos pondremos en contacto con usted.</span>\n              </div>\n              <span className=\"flex ml-auto text-[#022953] text-lg\">\n                +{deliveryFee.toFixed(2)} {location === \"CU\" ? \"CUP\" : \"USD\"}\n              </span>\n            </div>\n          )}\n          <div className=\"flex w-full items-center pt-2 border-t border-gray-200 mt-2\">\n            <span className=\"flex text-[#9a9a9a] font-bold\">Total a pagar</span>\n            <span className=\"flex ml-auto text-[#022953] text-2xl font-bold\">\n              {grandTotal.toFixed(2)} {location === \"CU\" ? \"CUP\" : \"USD\"}\n            </span>\n          </div>\n        </div>\n        <hr className=\"flex h-px border-[#9a9a9a] w-full\" />\n        <div className=\"flex flex-col gap-4\">\n          <div className=\"flex flex-col gap-2\">\n            <span className=\"flex text-[#9a9a9a]\">Tú</span>\n            <div className=\"flex items-center gap-4\">\n              <div className=\"flex rounded-full bg-[#9a9a9a] w-12 h-12 items-center justify-center text-white p-1\">\n                <UserRound className=\"flex w-full h-full\" />\n              </div>\n              <span className=\"flex text-[#9a9a9a]\">\n                {typeof window !== \"undefined\"\n                  ? `${JSON.parse(localStorage.getItem(\"userData\") || \"{}\").name || \"\"} ${JSON.parse(localStorage.getItem(\"userData\") || \"{}\").last1 || \"\"} ${JSON.parse(localStorage.getItem(\"userData\") || \"{}\").last2 || \"\"}`\n                  : \"\"}\n              </span>\n            </div>\n          </div>\n\n          {/* Phone Number Input */}\n          <div className=\"flex flex-col gap-2\">\n            <label className=\"text-[#9a9a9a]\">\n              Número de teléfono del receptor\n            </label>\n            <div className=\"relative\">\n              <input\n                type=\"tel\"\n                value={formData.phone}\n                onChange={(e) => {\n                  const value = e.target.value.replace(/[^0-9+\\s-]/g, '');\n                  setFormData({ ...formData, phone: value });\n                }}\n                placeholder=\"Ej: 55555555 o +53 55555555\"\n                className={`w-full p-2 rounded-md border ${tried && !validation.phone && formData.phone\n                  ? 'border-red-500'\n                  : 'border-gray-300'\n                  } ${formData.phone ? (validation.phone ? 'border-green-500' : 'border-red-500') : ''}`}\n                required\n              />\n              {formData.phone && (\n                <div className=\"absolute right-3 top-1/2 transform -translate-y-1/2\">\n                  {validation.phone ? (\n                    <Check className=\"h-5 w-5 text-green-500\" />\n                  ) : (\n                    <X className=\"h-5 w-5 text-red-500\" />\n                  )}\n                </div>\n              )}\n            </div>\n            {tried && !validation.phone && formData.phone && (\n              <p className=\"text-red-500 text-sm\">\n                Por favor ingrese un número de teléfono válido\n              </p>\n            )}\n          </div>\n        </div>\n        <div className=\"flex flex-col gap-4\">\n          <div className=\"flex flex-col gap-2\">\n            <label className=\"text-[#9a9a9a]\">Carnet de identidad del receptor</label>\n            <div className=\"relative\">\n              <input\n                type=\"text\"\n                value={formData.ci_cliente || ''}\n                onChange={(e) => {\n                  const value = e.target.value.replace(/[^0-9A-Za-z]/g, '').toUpperCase();\n                  setFormData({ ...formData, ci_cliente: value });\n                }}\n                placeholder=\"Ej: 12345678901\"\n                className={`w-full p-2 rounded-md border ${tried && !validation.ci_cliente && formData.ci_cliente\n                  ? 'border-red-500'\n                  : 'border-gray-300'\n                  } ${formData.ci_cliente ? (validation.ci_cliente ? 'border-green-500' : 'border-red-500') : ''\n                  }`}\n                required\n              />\n              {formData.ci_cliente && (\n                <div className=\"absolute right-3 top-1/2 transform -translate-y-1/2\">\n                  {validation.ci_cliente ? (\n                    <Check className=\"h-5 w-5 text-green-500\" />\n                  ) : (\n                    <X className=\"h-5 w-5 text-red-500\" />\n                  )}\n                </div>\n              )}\n            </div>\n            {tried && !validation.ci_cliente && formData.ci_cliente && (\n              <p className=\"text-red-500 text-sm\">\n                Por favor ingrese un carnet de identidad válido\n              </p>\n            )}\n          </div>\n        </div>\n        {addresses.length > 0 && (\n          <div className=\"flex flex-col gap-4\">\n            <div className=\"flex items-center gap-2\">\n              <input\n                type=\"checkbox\"\n                id=\"useSavedAddress\"\n                checked={useMyAddress}\n                onChange={() => setUseMyAddress(!useMyAddress)}\n                className=\"h-4 w-4 rounded border-gray-300 text-[#022953] focus:ring-[#022953]\"\n              />\n              <label htmlFor=\"useSavedAddress\" className=\"text-[#9a9a9a] cursor-pointer\">\n                Usar una dirección guardada\n              </label>\n            </div>\n\n            {useMyAddress && (\n              <div className=\"flex flex-col gap-2\">\n                <label className=\"text-[#9a9a9a]\">Selecciona una dirección:</label>\n                <div className=\"grid gap-2\">\n                  {addresses.map((address) => (\n                    <div \n                      key={address.id} \n                      className={`p-3 border rounded-md cursor-pointer transition-colors ${\n                        selectedAddress === address.id \n                          ? 'border-[#022953] bg-blue-50' \n                          : 'border-gray-300 hover:border-gray-400'\n                      }`}\n                      onClick={() => {\n                        setSelectedAddress(address.id);\n                        setFormData(prev => ({\n                          ...prev,\n                          provincia: address.provincia,\n                          municipio: address.municipio,\n                          direccionExacta: address.direccion || ''\n                        }));\n                      }}\n                    >\n                      <p className=\"font-medium\">{address.direccion}</p>\n                      <p className=\"text-sm\">{address.municipio}, {address.provincia}</p>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            )}\n          </div>\n        )}\n\n        <div className={`flex flex-col gap-4 w-full ${useMyAddress && addresses.length > 0 ? 'hidden' : ''}`}>\n          {addresses.length > 0 && (\n            <p className=\"text-sm text-gray-600\">O ingresa una dirección manualmente:</p>\n          )}\n          <div className=\"flex flex-col gap-2\">\n            <label className=\"text-[#9a9a9a]\">Provincia</label>\n            <div className=\"relative\">\n              <select\n                value={formData.provincia}\n                onChange={(e) =>\n                  setFormData({\n                    ...formData,\n                    provincia: e.target.value,\n                    municipio: \"\",\n                  })\n                }\n                className={`w-full p-2 rounded-md border ${formData.provincia ? 'border-green-500' : 'border-gray-300'\n                  }`}\n              >\n                <option value=\"\">Seleccione una provincia</option>\n                {Object.keys(provinciasCuba).map((provincia) => (\n                  <option key={provincia} value={provincia}>\n                    {provincia}\n                  </option>\n                ))}\n              </select>\n              {formData.provincia && (\n                <div className=\"absolute right-3 top-1/2 transform -translate-y-1/2\">\n                  <Check className=\"h-5 w-5 text-green-500\" />\n                </div>\n              )}\n            </div>\n          </div>\n\n          <div className=\"flex flex-col gap-2\">\n            <label className=\"text-[#9a9a9a]\">Municipio</label>\n            <div className=\"relative\">\n              <select\n                value={formData.municipio}\n                onChange={(e) =>\n                  setFormData({ ...formData, municipio: e.target.value })\n                }\n                className={`w-full p-2 rounded-md border ${formData.municipio ? 'border-green-500' : 'border-gray-300'\n                  }`}\n                disabled={!formData.provincia}\n              >\n                <option value=\"\">Seleccione un municipio</option>\n                {formData.provincia &&\n                  provinciasCuba[\n                    formData.provincia as keyof typeof provinciasCuba\n                  ].map((municipio: string) => (\n                    <option key={municipio} value={municipio}>\n                      {municipio}\n                    </option>\n                  ))}\n              </select>\n              {formData.municipio && (\n                <div className=\"absolute right-3 top-1/2 transform -translate-y-1/2\">\n                  <Check className=\"h-5 w-5 text-green-500\" />\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/* Delivery Option */}\n        <div className=\"flex flex-col gap-2 mt-4\">\n          <label className={`flex items-center justify-between ${\n            formData.provincia === 'La Habana' ? 'text-[#9a9a9a]' : 'text-gray-400'\n          }`}>\n            <span className=\"flex items-center\">\n              ¿Necesitas entrega a domicilio?\n              {formData.provincia !== 'La Habana' && (\n                <span className=\"text-xs ml-2\">(Disponible solo en La Habana)</span>\n              )}\n            </span>\n            <div className=\"flex items-center gap-2\">\n              <input\n                type=\"checkbox\"\n                id=\"deliveryCheckbox\"\n                checked={delivery === 1}\n                disabled={formData.provincia !== 'La Habana'}\n                onChange={(e) => {\n                  const isChecked = e.target.checked;\n                  setDelivery(isChecked ? 1 : 0);\n                  setIsAnimating(true);\n                  if (isChecked) {\n                    setIsExpanded(true);\n                  } else {\n                    setFormData(prev => ({ ...prev, direccionExacta: '' }));\n                  }\n                }}\n                className={`h-5 w-5 rounded border-gray-300 text-[#022953] focus:ring-[#022953] ${\n                  formData.provincia === 'La Habana' \n                    ? 'cursor-pointer' \n                    : 'cursor-not-allowed opacity-50'\n                }`}\n              />\n              {delivery === 1 && formData.provincia === 'La Habana' && (\n                <span className=\"text-sm text-gray-600 whitespace-nowrap\">\n                  +${deliveryFee.toFixed(2)} {location === \"CU\" ? \"CUP\" : \"USD\"}\n                </span>\n              )}\n            </div>\n          </label>\n          \n          {delivery === 1 && formData.provincia === 'La Habana' && (\n            <div className=\"text-xs text-gray-500 mt-1\">\n              *El precio puede variar según la ubicación exacta. Nos pondremos en contacto contigo para confirmar el costo final.\n            </div>\n          )}\n        </div>\n\n        {/* Delivery Address - Only show when using manual address or no address is selected */}\n        {(!useMyAddress || selectedAddress === null) && (\n          <div\n            className={`overflow-hidden transition-all duration-300 ease-in-out ${\n              delivery === 1 ? 'max-h-40 opacity-100' : 'max-h-0 opacity-0'\n            }`}\n            onTransitionEnd={() => {\n              if (delivery === 0) {\n                setIsExpanded(false);\n              }\n              setIsAnimating(false);\n            }}\n            style={{\n              visibility: isExpanded || isAnimating ? 'visible' : 'hidden'\n            }}\n          >\n            {isExpanded && (\n              <div className=\"flex flex-col gap-2 w-full pt-2\">\n                <label className=\"text-[#9a9a9a]\">Dirección exacta</label>\n                <div className=\"relative\">\n                  <textarea\n                    value={formData.direccionExacta}\n                    onChange={(e) =>\n                      setFormData(prev => ({ ...prev, direccionExacta: e.target.value }))\n                    }\n                    required={delivery === 1}\n                    placeholder=\"Escriba su dirección completa aquí (calle, número, entre calles, edificio, apartamento, etc.)\"\n                    className={`w-full p-2 min-h-20 bg-white placeholder:text-left text-left align-top rounded-md border focus:ring-2 focus:ring-[#022953] focus:border-transparent transition-all duration-200 ${\n                      tried && delivery === 1 && !formData.direccionExacta\n                        ? 'border-red-500'\n                        : formData.direccionExacta\n                          ? 'border-green-500'\n                          : 'border-gray-300'\n                    }`}\n                  />\n                  {formData.direccionExacta && (\n                    <div className=\"absolute right-3 top-3\">\n                      <Check className=\"h-5 w-5 text-green-500\" />\n                    </div>\n                  )}\n                </div>\n                {tried && delivery === 1 && !formData.direccionExacta && (\n                  <p className=\"text-red-500 text-sm\">\n                    Por favor ingrese una dirección de entrega válida\n                  </p>\n                )}\n              </div>\n            )}\n          </div>\n        )}\n\n        {formData.provincia && formData.municipio && (\n          <div className=\"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-md\">\n            <p className=\"text-sm text-blue-800\">\n              <strong>Ubicación seleccionada:</strong> {formData.municipio}, {formData.provincia}\n              {delivery === 1 && formData.direccionExacta && (\n                <span className=\"block mt-1\">\n                  <strong>Dirección de entrega:</strong> {formData.direccionExacta}\n                </span>\n              )}\n            </p>\n          </div>\n        )}\n\n        <div className=\"w-full mt-6\">\n          <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Resumen del pedido</h3>\n          <div className=\"bg-white rounded-lg border border-gray-200 p-4\">\n            <div className=\"flex justify-between mb-2\">\n              <span>Subtotal:</span>\n              <span>${subtotal.toFixed(2)} {location === \"CU\" ? \"CUP\" : \"USD\"}</span>\n            </div>\n            {delivery === 1 && (\n              <div className=\"flex justify-between mb-2\">\n                <span>Envío:</span>\n                <span>${deliveryFee.toFixed(2)} {location === \"CU\" ? \"CUP\" : \"USD\"}</span>\n              </div>\n            )}\n            <div className=\"border-t border-gray-200 my-3\"></div>\n            <div className=\"flex justify-between font-medium\">\n              <span>Total:</span>\n              <span>${(subtotal + (delivery === 1 ? deliveryFee : 0)).toFixed(2)} {location === \"CU\" ? \"CUP\" : \"USD\"}</span>\n            </div>\n          </div>\n        </div>\n\n        {/*\n        <div className=\"w-full mt-4 mb-6\">\n          <div className=\"flex justify-between text-sm text-gray-600 mb-1\">\n            <span>Progreso del formulario</span>\n            <span>{Math.round(progress)}%</span>\n          </div>\n          <div className=\"w-full bg-gray-200 rounded-full h-2.5 overflow-hidden\">\n            <div\n              className=\"bg-gradient-to-r from-[#022953] to-[#034078] h-2.5 rounded-full transition-all duration-500 ease-out\"\n              style={{ width: `${progress}%` }}\n            />\n          </div>\n        </div>\n        */}\n\n        <div className=\"hidden w-full h-full bg-blue-500/10 md:p-10 p-4 items-center justify-center text-center md:text-2xl rounded-md text-blue-900\">\n          Lo sentimos, no se pueden hacer pedidos temporalmente\n        </div>\n\n        <div className=\"flex w-full justify-center\">\n          <button\n            onClick={handleSubmit}\n            className=\"flex w-full md:w-1/2 h-12 bg-[#022953] font-bold text-white items-center justify-center hover:text-lg transition-all duration-300 rounded-md\"\n          >\n            Confirmar orden\n          </button>\n        </div>\n        {tried && error && (\n          <span className=\"w-full bg-red-300 font-xs p-2 items-center text-center text-red-700 rounded-md\">\n            {error}\n          </span>\n        )}\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAAA;AAAA;AACA;AACA;AANA;;;;;;;AAQA,MAAM,iBAAiB;IACrB,iBAAiB;QACf;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,UAAU;QACR;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,aAAa;QACX;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,WAAW;QACT;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,UAAU;QACR;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,YAAY;QACV;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,eAAe;QACb;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,mBAAmB;QACjB;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,kBAAkB;QAChB;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,UAAU;QACR;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,aAAa;QACX;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,SAAS;QACP;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,QAAQ;QACN;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,oBAAoB;QAClB;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,YAAY;QACV;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,uBAAuB;QAAC;KAAsB;AAChD;AAEA,eAAe,eAAe,QAAa;IACzC,IAAI,CAAC,UAAU;QACb,Q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","debugId":null}}]
}