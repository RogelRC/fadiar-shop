(()=>{var e={};e.id=314,e.ids=[314],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14183:(e,t,s)=>{"use strict";s.d(t,{default:()=>a});let a=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"D:\\\\Projects\\\\fadiar-shop\\\\src\\\\components\\\\OrderRecord.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\Projects\\fadiar-shop\\src\\components\\OrderRecord.tsx","default")},15148:(e,t,s)=>{"use strict";s.d(t,{default:()=>g});var a=s(60687),r=s(43210),i=s(88920),n=s(98777),l=s(62688);let d=(0,l.A)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),o=(0,l.A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),c=(0,l.A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);var m=s(19080);let x=(0,l.A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var p=s(14952);let h=(0,l.A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),u=(0,l.A)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),y=(0,l.A)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);function g(){let[e,t]=(0,r.useState)([]),[s,l]=(0,r.useState)({}),[g,b]=(0,r.useState)("CUP"),[f,j]=(0,r.useState)("CU"),[N,v]=(0,r.useState)([{value:1},{value:1}]),[w,k]=(0,r.useState)(1),[C]=(0,r.useState)(5),[P,S]=(0,r.useState)(!0),[A,_]=(0,r.useState)({}),[E,M]=(0,r.useState)({}),[q,z]=(0,r.useState)(null),[D,O]=(0,r.useState)(null),U=async e=>{_(t=>({...t,[e]:!0}));try{let t=JSON.parse(localStorage.getItem("userData")||"{}"),s=await fetch("https://app.fadiar.com/api/getOrder",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_user_action:t.userId,id_order:e})}),a=await s.json();l(t=>({...t,[e]:a.products||[]}))}catch(e){console.error("Error al obtener detalles del pedido:",e)}finally{_(t=>({...t,[e]:!1}))}},$=e=>{switch(e){case -1:return"bg-red-100 text-red-800 border-red-200";case 0:return"bg-blue-100 text-blue-800 border-blue-200";case 1:return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},I=e=>{switch(e){case -1:return(0,a.jsx)(d,{className:"w-4 h-4"});case 0:return(0,a.jsx)(o,{className:"w-4 h-4"});case 1:return(0,a.jsx)(c,{className:"w-4 h-4"});default:return(0,a.jsx)(m.A,{className:"w-4 h-4"})}},G=e=>{switch(e){case -1:return"Cancelada";case 0:return"En espera";case 1:return"Aceptado";default:return"Desconocido"}},T=e=>{let t=e.prices.find(e=>"CUP"===e[2]),s=e.prices.find(e=>"USD"===e[2]);return"CU"===f&&t?`${t[1]} CUP`:"CU"!==f&&s?`${s[1]} USD`:"Precio no disponible"},R=w*C,F=R-C,H=e.slice(F,R),J=Math.ceil(e.length/C),V=t=>{k(t);let a=(t-1)*C;e.slice(a,a+C).forEach(e=>{s[e.id]||U(e.id)})},B=e=>{O(e)},L=async()=>{if(D)try{M(e=>({...e,[D]:!0})),z(null);let e=JSON.parse(localStorage.getItem("userData")||"{}");if(!(await fetch("https://app.fadiar.com/api/denegar_pedido",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_user_action:e.userId,id_order:D,id_manager:e.userId})})).ok)throw Error("No se pudo cancelar el pedido. Intente nuevamente.");t(e=>e.map(e=>e.id===D?{...e,state:-1}:e)),O(null)}catch(e){console.error("Error al cancelar el pedido:",e),z(e instanceof Error?e.message:"Error al cancelar el pedido")}finally{M(e=>({...e,[D]:!1}))}};if(P)return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,a.jsxs)(n.P.div,{className:"text-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(0,a.jsx)("div",{className:"w-12 h-12 border-2 border-gray-200 border-t-gray-600 rounded-full animate-spin mx-auto mb-3"}),(0,a.jsx)("div",{className:"text-gray-600 font-medium",children:"Cargando tus pedidos..."})]})});if(0===e.length)return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",children:(0,a.jsxs)("div",{className:"text-center max-w-md p-8 bg-white rounded-lg shadow-lg",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-[#022953] mb-4",children:"No tienes pedidos a\xfan"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"A\xfan no has realizado ning\xfan pedido. Explora nuestros productos y encuentra lo que necesitas."}),(0,a.jsx)("button",{onClick:()=>window.location.href="/products",className:"w-full bg-[#022953] text-white font-bold py-3 px-6 rounded hover:bg-opacity-90 transition-colors",children:"Ver productos"})]})});let X=()=>(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 p-4 bg-white border-b border-gray-100 last:border-b-0 animate-pulse",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-24 h-24 sm:w-32 sm:h-32 bg-gray-200 rounded"})}),(0,a.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),(0,a.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})]});return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,a.jsxs)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Mis Pedidos"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Historial de todas tus compras"})]}),0===e.length?(0,a.jsxs)(n.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},className:"text-center py-16",children:[(0,a.jsx)(m.A,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-600 mb-1",children:"No tienes pedidos a\xfan"}),(0,a.jsx)("p",{className:"text-gray-500 text-sm",children:"Cuando realices tu primera compra, aparecer\xe1 aqu\xed"})]}):(0,a.jsxs)(a.Fragment,{children:[J>1&&(0,a.jsxs)(n.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:"flex flex-col sm:flex-row items-center justify-center gap-2 mb-6 px-2",children:[(0,a.jsxs)("button",{onClick:()=>V(w-1),disabled:1===w,className:"flex items-center gap-1 px-2 sm:px-3 py-2 text-xs sm:text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[(0,a.jsx)(x,{className:"w-3 h-3 sm:w-4 sm:h-4"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Anterior"})]}),(0,a.jsx)("div",{className:"flex gap-1 flex-wrap justify-center",children:Array.from({length:J},(e,t)=>t+1).map(e=>(0,a.jsx)("button",{onClick:()=>V(e),className:`px-2 sm:px-3 py-2 text-xs sm:text-sm font-medium rounded-lg transition-colors ${w===e?"bg-blue-600 text-white":"text-gray-500 bg-white border border-gray-300 hover:bg-gray-50"}`,children:e},e))}),(0,a.jsxs)("button",{onClick:()=>V(w+1),disabled:w===J,className:"flex items-center gap-1 px-2 sm:px-3 py-2 text-xs sm:text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[(0,a.jsx)("span",{className:"hidden sm:inline",children:"Siguiente"}),(0,a.jsx)(p.A,{className:"w-3 h-3 sm:w-4 sm:h-4"})]})]}),e.length>0&&(0,a.jsxs)(n.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"text-center mb-6 text-sm text-gray-500",children:["Mostrando ",F+1," a ",Math.min(R,e.length)," de ",e.length," pedidos"]}),(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsx)(i.N,{mode:"wait",children:H.map((e,t)=>(0,a.jsxs)(n.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3,delay:.05*t},className:"bg-white rounded-lg border border-gray-200 overflow-hidden hover:border-gray-300 transition-colors",children:[(0,a.jsx)("div",{className:"text-white p-6",style:{background:"linear-gradient(90deg, #011d30, #1a2d52)"},children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-full bg-white/10",children:I(e.state)}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("span",{className:"font-semibold text-lg",children:["Pedido #",e.id]}),(0,a.jsx)("span",{className:`flex items-center justify-center text-center px-3 py-1 rounded-full text-xs font-medium ${$(e.state)}`,style:{display:"flex",justifyContent:"center"},children:G(e.state)}),0===e.state&&(0,a.jsx)("button",{onClick:t=>{t.stopPropagation(),B(e.id)},disabled:E[e.id],className:`px-3 py-1 text-xs font-medium rounded-full bg-red-100 text-red-800 border border-red-200 hover:bg-red-200 transition-colors ${E[e.id]?"opacity-70 cursor-not-allowed":""}`,children:E[e.id]?"Cancelando...":"Cancelar pedido"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-300 mt-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(h,{className:"w-4 h-4"}),e.date.split(" ")[0]]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(o,{className:"w-4 h-4"}),e.date.split(" ")[1]]})]})]})]}),e.direccionExacta&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[(0,a.jsx)(u,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"truncate max-w-xs",children:e.direccionExacta})]}),(0,a.jsxs)("span",{className:"md:ml-16",children:["Tel\xe9fono del cliente: ",e.client_cell]}),(0,a.jsxs)("span",{children:["Carnet de identidad del cliente: ",`${e.client_ci}`.padStart(11,"0")]})]})}),(0,a.jsx)("div",{className:"p-6",children:A[e.id]?(0,a.jsx)("div",{className:"space-y-4",children:[1,2,3].map(e=>(0,a.jsx)(X,{},e))}):s[e.id]?(0,a.jsx)("div",{className:"space-y-4",children:s[e.id].map((e,t)=>(0,a.jsxs)(n.P.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{duration:.2,delay:.05*t},className:"flex flex-col sm:flex-row gap-4 p-4 bg-white border-b border-gray-100 last:border-b-0 hover:bg-gray-50 transition-colors",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("img",{src:`https://app.fadiar.com/api/${e.img}`,alt:e.name,className:"w-24 h-24 sm:w-32 sm:h-32 object-cover rounded-lg shadow-md",onError:e=>{e.target.style.display="none"}})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2 line-clamp-2",children:e.name}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,a.jsx)(y,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"font-medium",children:T(e)})]})]})]},t))}):(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(m.A,{className:"w-12 h-12 mx-auto mb-2 text-gray-300"}),(0,a.jsx)("p",{children:"No se pudieron cargar los productos"})]})})]},e.id))})}),J>1&&(0,a.jsxs)(n.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:"flex flex-col sm:flex-row items-center justify-center gap-2 mt-8 px-2",children:[(0,a.jsxs)("button",{onClick:()=>V(w-1),disabled:1===w,className:"flex items-center gap-1 px-2 sm:px-3 py-2 text-xs sm:text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[(0,a.jsx)(x,{className:"w-3 h-3 sm:w-4 sm:h-4"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Anterior"})]}),(0,a.jsx)("div",{className:"flex gap-1 flex-wrap justify-center",children:Array.from({length:J},(e,t)=>t+1).map(e=>(0,a.jsx)("button",{onClick:()=>V(e),className:`px-2 sm:px-3 py-2 text-xs sm:text-sm font-medium rounded-lg transition-colors ${w===e?"bg-blue-600 text-white":"text-gray-500 bg-white border border-gray-300 hover:bg-gray-50"}`,children:e},e))}),(0,a.jsxs)("button",{onClick:()=>V(w+1),disabled:w===J,className:"flex items-center gap-1 px-2 sm:px-3 py-2 text-xs sm:text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[(0,a.jsx)("span",{className:"hidden sm:inline",children:"Siguiente"}),(0,a.jsx)(p.A,{className:"w-3 h-3 sm:w-4 sm:h-4"})]})]}),e.length>0&&(0,a.jsxs)(n.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"text-center mt-4 text-sm text-gray-500",children:["Mostrando ",F+1," a ",Math.min(R,e.length)," de ",e.length," pedidos"]})]}),(0,a.jsx)(i.N,{children:null!==D&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50",onClick:()=>O(null)}),(0,a.jsxs)(n.P.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-white rounded-xl shadow-xl z-50 w-full max-w-md p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-800",children:"Confirmar cancelaci\xf3n"}),(0,a.jsx)("button",{onClick:()=>O(null),className:"text-gray-500 hover:text-gray-700 transition-colors",children:(0,a.jsx)(d,{className:"w-6 h-6"})})]}),(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)("p",{className:"text-gray-700",children:["\xbfEst\xe1 seguro que desea cancelar el pedido #",D,"? Esta acci\xf3n no se puede deshacer."]})}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,a.jsx)("button",{onClick:()=>O(null),disabled:E[D],className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-50",children:"Volver"}),(0,a.jsx)("button",{onClick:L,disabled:E[D],className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 flex items-center",children:E[D]?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Cancelando..."]}):"S\xed, cancelar pedido"})]})]})]})}),(0,a.jsx)(i.N,{children:q&&(0,a.jsx)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"fixed bottom-6 right-6 bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-lg shadow-lg z-50 max-w-sm",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(d,{className:"h-5 w-5 mr-2"}),(0,a.jsx)("p",{className:"font-medium",children:q}),(0,a.jsx)("button",{onClick:()=>z(null),className:"ml-4 text-red-500 hover:text-red-700",children:(0,a.jsx)(d,{className:"h-5 w-5"})})]})})})]})})}},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},24374:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var a=s(37413),r=s(14183),i=s(61120);function n(){return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(i.Suspense,{children:(0,a.jsx)(r.default,{})})})}},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},57302:(e,t,s)=>{Promise.resolve().then(s.bind(s,15148))},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},64906:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>x,tree:()=>o});var a=s(65239),r=s(48088),i=s(88170),n=s.n(i),l=s(30893),d={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);s.d(t,d);let o={children:["",{children:["record",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,24374)),"D:\\Projects\\fadiar-shop\\src\\app\\record\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,97582)),"D:\\Projects\\fadiar-shop\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["D:\\Projects\\fadiar-shop\\src\\app\\record\\page.tsx"],m={require:s,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/record/page",pathname:"/record",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},70440:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});var a=s(31658);let r=async e=>[{type:"image/x-icon",sizes:"24x32",url:(0,a.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},79551:e=>{"use strict";e.exports=require("url")},94254:(e,t,s)=>{Promise.resolve().then(s.bind(s,14183))}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[447,108,658,242],()=>s(64906));module.exports=a})();