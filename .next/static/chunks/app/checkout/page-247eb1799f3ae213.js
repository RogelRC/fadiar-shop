(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[279],{3476:(e,a,t)=>{Promise.resolve().then(t.bind(t,5038))},4616:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(9946).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},5038:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>v});var r=t(5155),s=t(2115),i=t(7712),n=t(4616),l=t(9946);let c=(0,l.A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var o=t(6766),d=t(5237);function u(e){let{item:a,location:t,currencies:l,onTotalChange:u}=e,[m,x]=(0,s.useState)(a.en_carrito),[p,h]=(0,s.useState)(!0),[f,g]=(0,s.useState)(a.en_carrito),[j,b]=(0,s.useState)(!1),v=(0,d._)(e=>e.setAmount),{amount:N}=(0,d._)(),y=(0,s.useMemo)(()=>{var e,r;let s=0;return"CU"===t&&"CUP"===a.prices[0][2]?s=a.prices[0][3]||a.prices[0][1]:"CU"!==t&&"USD"===a.prices[0][2]?s=a.prices[0][3]||a.prices[0][1]:"CU"===t&&"USD"===a.prices[0][2]?s=(a.prices[0][3]||a.prices[0][1])*(null===(e=l[1])||void 0===e?void 0:e.value)||0:"CU"!==t&&"CUP"===a.prices[0][2]&&(s=Math.ceil((a.prices[0][3]||a.prices[0][1])/(null===(r=l[1])||void 0===r?void 0:r.value)*100)/100||0),s},[t,l,a.prices]);function S(e){e==m-1?v(N-1):e==m+1&&v(N+1),x(e),e<=0&&h(!1),b(!0),setTimeout(()=>{b(!1)},3e3)}(0,s.useEffect)(()=>{u&&u(y*m)},[m]),(0,s.useEffect)(()=>{let e=async()=>{try{let e=JSON.stringify({id_user_action:JSON.parse(localStorage.getItem("userData")||"{}").userId||null,id_user:JSON.parse(localStorage.getItem("userData")||"{}").userId||null,id_product:a.id,newCount:m}),t=await fetch("".concat("https://app.fadiar.com/api","/modificar_cantidad_producto_carrito"),{method:"POST",headers:{"Content-Type":"application/json"},body:e});if(!t.ok)throw x(f),Error("Error al actualizar el carrito");console.log(await t.json()),g(m)}catch(e){console.error("Error actualizando el carrito:",e)}},t=async()=>{try{let e=JSON.stringify({id_user_action:JSON.parse(localStorage.getItem("userData")||"{}").userId||null,id_user:JSON.parse(localStorage.getItem("userData")||"{}").userId||null,id_product:a.id});if(!(await fetch("".concat("https://app.fadiar.com/api","/eliminar_producto_carrito"),{method:"POST",headers:{"Content-Type":"application/json"},body:e})).ok)throw Error("Error al eliminar el item del carrito");window.dispatchEvent(new Event("cartDataChanged"))}catch(e){console.error("Error eliminando el item del carrito:",e)}};m>0?e():t()},[m]);let C=async()=>{try{b(!0);let e=JSON.stringify({id_user_action:JSON.parse(localStorage.getItem("userData")||"{}").userId||null,id_user:JSON.parse(localStorage.getItem("userData")||"{}").userId||null,id_product:a.id});if(!(await fetch("".concat("https://app.fadiar.com/api","/eliminar_producto_carrito"),{method:"POST",headers:{"Content-Type":"application/json"},body:e})).ok)throw Error("Error al eliminar el producto del carrito");u&&u(0),v(N-m),h(!1),window.dispatchEvent(new Event("cartDataChanged")),console.log("Producto eliminado exitosamente")}catch(e){console.error("Error eliminando el producto del carrito:",e)}finally{b(!1)}};return(0,r.jsx)(r.Fragment,{children:p&&(0,r.jsxs)("div",{className:"flex w-full h-28 bg-white",children:[(0,r.jsx)("div",{className:"flex-shrink-0 h-full aspect-square overflow-hidden p-1",children:(0,r.jsx)(o.default,{src:"".concat("https://app.fadiar.com/api","/").concat(a.img),alt:a.name,width:200,height:200,className:"w-full h-full object-cover"})}),(0,r.jsxs)("div",{className:"flex flex-col w-full max-w-full text-sm p-2 text-[#9f9f9f]",children:[(0,r.jsx)("span",{className:"flex w-full font-semibold",children:a.name}),(0,r.jsxs)("span",{className:"flex w-full text-sm",children:["Marca ",a.brand]}),(0,r.jsxs)("div",{className:"flex flex-1",children:[(0,r.jsxs)("span",{className:"flex font-bold mt-auto text-[#022953]",children:["CU"===t&&"CUP"===a.prices[0][2]&&(0,r.jsxs)(r.Fragment,{children:[a.prices[0][3]||a.prices[0][1]," CUP"]}),"CU"!==t&&"USD"===a.prices[0][2]&&(0,r.jsxs)(r.Fragment,{children:[a.prices[0][3]||a.prices[0][1]," USD"]}),"CU"===t&&"USD"===a.prices[0][2]&&(0,r.jsxs)(r.Fragment,{children:[(a.prices[0][3]||a.prices[0][1])*l[1].value," CUP"]}),"CU"!==t&&"CUP"===a.prices[0][2]&&(0,r.jsxs)(r.Fragment,{children:[Math.ceil((a.prices[0][3]||a.prices[0][1])/l[1].value*100)/100," ","USD"]})]}),(0,r.jsxs)("div",{className:"flex ml-auto items-end",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1 mr-2",children:[(0,r.jsx)("button",{onClick:()=>S(m-1),className:"text-[#022953] rounded-sm transition-all duration-300 ".concat(!1===j?"hover:text-white hover:bg-[#022953]":"cursor-wait"),disabled:j,children:(0,r.jsx)(i.A,{})}),(0,r.jsx)("input",{type:"number",className:"flex w-16 border-gray-300 border-2 rounded-sm text-[#022953] text-center",value:m,onChange:()=>S(m),disabled:!0}),(0,r.jsx)("button",{onClick:()=>S(m+1),className:"text-[#022953] rounded-sm transition-all duration-300 ".concat(!1===j?"hover:text-white hover:bg-[#022953]":"cursor-wait"),disabled:j,children:(0,r.jsx)(n.A,{})})]}),(0,r.jsx)("button",{onClick:C,className:"text-red-500 hover:text-red-600 rounded-sm transition-all duration-300 p-1 ".concat(!1===j?"hover:bg-red-50":"cursor-wait"),disabled:j,title:"Eliminar producto",children:(0,r.jsx)(c,{size:14})})]})]})]})]})})}let m=(0,l.A)("UserRound",[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]]);var x=t(5196),p=t(4416),h=t(5695),f=t(9474);let g={"Pinar del R\xedo":["Pinar del R\xedo","Consolaci\xf3n del Sur","Guane","La Palma","Los Palacios","Mantua","Minas de Matahambre","San Juan y Mart\xednez","San Luis","Sandino","Vi\xf1ales"],Artemisa:["Artemisa","Alqu\xedzar","Bauta","Caimito","Guanajay","G\xfcira de Melena","Mariel","San Antonio de los Ba\xf1os","Bah\xeda Honda","Candelaria","San Crist\xf3bal"],"La Habana":["Arroyo Naranjo","Boyeros","Centro Habana","Cerro","Cotorro","Diez de Octubre","Guanabacoa","Habana del Este","Habana Vieja","La Lisa","Marianao","Playa","Plaza de la Revoluci\xf3n","Regla","San Miguel del Padr\xf3n"],Mayabeque:["Bataban\xf3","Bejucal","G\xfcines","Jaruco","Madruga","Melena del Sur","Nueva Paz","Quivic\xe1n","San Jos\xe9 de las Lajas","Santa Cruz del Norte"],Matanzas:["C\xe1rdenas","Ci\xe9naga de Zapata","Col\xf3n","Jag\xfcey Grande","Jovellanos","Limonar","Los Arabos","Mart\xed","Matanzas","Pedro Betancourt","Perico","Uni\xf3n de Reyes"],Cienfuegos:["Aguada de Pasajeros","Cienfuegos","Cruces","Cumanayagua","Lajas","Palmira","Rodas"],"Villa Clara":["Caibari\xe9n","Camajuan\xed","Cifuentes","Corralillo","Encrucijada","Manicaragua","Placetas","Quemado de G\xfcines","Ranchuelo","Remedios","Sagua la Grande","Santa Clara","Santo Domingo"],"Sancti Sp\xedritus":["Cabaigu\xe1n","Fomento","Jatibonico","La Sierpe","Sancti Sp\xedritus","Taguasco","Trinidad","Yaguajay"],"Ciego de \xc1vila":["Baragu\xe1","Bolivia","Ciego de \xc1vila","Chambas","Ciro Redondo","Florencia","Majagua","Mor\xf3n","Primero de Enero","Venezuela"],Camagüey:["Camag\xfcey","Carlos Manuel de C\xe9spedes","Esmeralda","Florida","Guaimaro","Jimaguay\xfa","Minas","Najasa","Nuevitas","Santa Cruz del Sur","Sibanic\xfa","Sierra de Cubitas","Vertientes"],"Las Tunas":["Amancio","Colombia","Jes\xfas Men\xe9ndez","Jobabo","Las Tunas","Majibacoa","Manat\xed","Puerto Padre"],Holguín:["Antilla","B\xe1guanos","Banes","Cacocum","Calixto Garc\xeda","Cueto","Frank Pa\xeds","Gibara","Holgu\xedn","Mayar\xed","Moa","Rafael Freyre","Sagua de T\xe1namo","Urbano Noris"],Granma:["Bartolom\xe9 Mas\xf3","Bayamo","Buey Arriba","Campechuela","Cauto Cristo","Guisa","Jiguan\xed","Manzanillo","Media Luna","Niquero","Pil\xf3n","R\xedo Cauto","Yara"],"Santiago de Cuba":["Contramaestre","Guam\xe1","Mella","Palma Soriano","San Luis","Santiago de Cuba","Segundo Frente","Songo - La Maya","Tercer Frente"],Guantánamo:["Baracoa","Caimanera","El Salvador","Guant\xe1namo","Im\xedas","Mais\xed","Manuel Tames","Niceto P\xe9rez","San Antonio del Sur","Yateras"],"Isla de la Juventud":["Isla de la Juventud"]};async function j(e){if(!e)return console.log("No tengo datos"),{};try{let a=JSON.stringify({id_user_action:e.userId,id_user:e.userId,comisiones:!1}),t=await fetch("".concat("https://app.fadiar.com/api","/obtener_productos_carrito"),{method:"POST",headers:{"Content-Type":"application/json"},body:a});if(!t.ok)throw Error("Error al cargar el carrito");return await t.json()}catch(e){console.log(e)}}async function b(){try{let e=await fetch("https://app.fadiar.com/api/get_location",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})}),a=await e.json();return a.country&&"Cuba"!==a.country?"US":"CU"}catch(e){return console.error("Error obteniendo la ubicaci\xf3n:",e),"US"}}function v(){let e=(0,h.useRouter)(),a=(0,d._)(e=>e.setAmount),t=(0,f.d)(e=>e.setObject),[i,n]=(0,s.useState)(null),[l,c]=(0,s.useState)([]),[o,v]=(0,s.useState)("US"),[N,y]=(0,s.useState)({}),[S,C]=(0,s.useState)(0),[w,_]=(0,s.useState)(!1),[E,P]=(0,s.useState)(!1),[U,M]=(0,s.useState)(!1),[k,O]=(0,s.useState)(""),[A,D]=(0,s.useState)(!0),[J,T]=(0,s.useState)([]),[I,L]=(0,s.useState)(null),[F,R]=(0,s.useState)({provincia:"",municipio:"",direccionExacta:"",phone:"",ci_cliente:""}),[z,B]=(0,s.useState)({provincia:!1,municipio:!1,direccionExacta:!1,phone:!1,ci_cliente:!1,addressSelected:!1}),[G,H]=(0,s.useState)(0),q=Object.values(N).reduce((e,a)=>e+a,0),V=5*(1===S),$=q+V;(0,s.useEffect)(()=>{"La Habana"!==F.provincia&&1===S&&(C(0),_(!1))},[F.provincia,S]),(0,s.useEffect)(()=>{(async()=>{try{let a=localStorage.getItem("userData");if(!a){e.push("/login");return}let t=JSON.parse(a),r=await fetch("".concat("https://app.fadiar.com/api","/obtener-direccion-domicilio-cliente"),{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({id_user:t.userId})});if(!r.ok)throw Error("Error al obtener direcciones");let s=await r.json();T(s.listado)}catch(e){console.error("Error fetching addresses:",e)}})()},[]),(0,s.useEffect)(()=>{let e=A&&null!==I,a=e||""!==F.provincia.trim()&&""!==F.municipio.trim(),t={provincia:!!e||""!==F.provincia.trim(),municipio:!!e||""!==F.municipio.trim(),phone:/^\+?[0-9\s-]{8,}$/.test(F.phone),ci_cliente:/^\d{11}$/.test(F.ci_cliente),addressSelected:a,direccionExacta:1!==S||""!==(F.direccionExacta||"").trim()};B(e=>({...e,...t})),H(Math.min(100,Object.values(t).filter(Boolean).length/(1===S?5:4)*100))},[F,S]);let Y=async()=>{if(M(!0),!(""!==F.provincia.trim()&&""!==F.municipio.trim()&&(0===S||""!==(F.direccionExacta||"").trim())&&""!==F.phone.trim()&&/^\d{11}$/.test(F.ci_cliente))){O("Por favor llene todos los campos obligatorios correctamente");return}O("");try{let r=JSON.parse(localStorage.getItem("userData")||"{}"),s=r.name||"",n="".concat(r.last1||""," ").concat(r.last2||"").trim();0===S&&(F.direccionExacta=null);let l={...F,name_cliente:s,last_names:n,cellphone_cliente:F.phone,id_user_action:r.userId,id_user:r.userId,gestor_id:r.userId,delivery:S,total:$,location:o,items:null==i?void 0:i.map(e=>({id_product:e.id,count:e.count,price:e.prices[0][3]||e.prices[0][1],currency:e.prices[0][2]}))};console.log("orderData"),console.log(l);let c=await fetch("".concat("https://app.fadiar.com/api","/add_order"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}),d=await c.json();if(t(d),!c.ok){O(d.message||"Error al comprar");return}if(!d||!d.order||!d.order.date){console.error("Unexpected API response structure:",d),O("Formato de respuesta inesperado del servidor");return}a(0);let u=new URLSearchParams({date:d.order.date,...F.direccionExacta&&{direccionExacta:"".concat(F.direccionExacta,", ").concat(F.municipio,", ").concat(F.provincia)},price:$.toFixed(2),currency:"USD"}).toString();e.push("/checkout/ticket?".concat(u))}catch(e){O(e instanceof Error?e.message:"Error desconocido")}},Q=(e,a)=>{y(t=>({...t,[e]:a}))};return((0,s.useEffect)(()=>{(async()=>{try{let e=await JSON.parse(localStorage.getItem("userData")),a=await j(e);await b(),n(e?a.carrito:{}),c(e?a.monedas[0].currencys:{}),v("US")}catch(e){console.error(e)}})()},[]),null===i)?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-white",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"w-12 h-12 border-4 border-gray-200 border-t-blue-600 rounded-full animate-spin mx-auto mb-4"}),(0,r.jsx)("div",{className:"text-gray-600 font-medium",children:"Cargando tu carrito..."})]})}):0===i.length?(0,r.jsx)("div",{className:"flex flex-col items-center justify-center min-h-[calc(100vh-88px)] p-4 bg-white",children:(0,r.jsxs)("div",{className:"text-center max-w-md p-8 bg-[#f4f4f4] rounded-lg shadow-lg",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-[#022953] mb-4",children:"Tu carrito est\xe1 vac\xedo"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"A\xfan no has agregado productos a tu carrito. Comienza a explorar nuestros productos y encuentra lo que necesitas."}),(0,r.jsx)("button",{onClick:()=>e.push("/products"),className:"w-full bg-[#022953] text-white font-bold py-3 px-6 rounded hover:bg-opacity-90 transition-colors",children:"Ver productos"})]})}):(0,r.jsx)("div",{className:"flex h-full w-full min-h-[calc(100vh-88px)] justify-center p-4 bg-white",children:(0,r.jsxs)("div",{className:"flex flex-col bg-[#f4f4f4] w-120 md:w-1/2 sm:w-2/3 rounded-lg shadow-lg sm:p-10 p-4 gap-4 sm:gap-6",children:[(0,r.jsx)("div",{className:"w-full",children:(0,r.jsx)("h1",{className:"flex font-bold text-xl sm:text-3xl text-[#022953] w-full sm:justify-start justify-center mb-6",children:"Resumen del carrito"})}),(0,r.jsx)("div",{className:"flex flex-col gap-4 sm:gap-6",children:i.map(e=>(0,r.jsx)(u,{location:o,item:e,currencies:l,onTotalChange:a=>Q(e.id,a)},e.id))}),(0,r.jsxs)("div",{className:"flex flex-col w-full gap-2 mt-6",children:[(0,r.jsxs)("div",{className:"flex w-full items-center",children:[(0,r.jsx)("span",{className:"flex text-[#9a9a9a]",children:"Subtotal"}),(0,r.jsxs)("span",{className:"flex ml-auto text-[#022953] text-lg",children:[q.toFixed(2)," ","CU"===o?"CUP":"USD"]})]}),1===S&&(0,r.jsxs)("div",{className:"flex w-full items-center",children:[(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("span",{className:"text-[#9a9a9a]",children:"Entrega a domicilio"}),(0,r.jsx)("span",{className:"text-xs text-gray-500",children:"*El precio puede variar seg\xfan la distancia. Nos pondremos en contacto con usted."})]}),(0,r.jsxs)("span",{className:"flex ml-auto text-[#022953] text-lg",children:["+",V.toFixed(2)," ","CU"===o?"CUP":"USD"]})]}),(0,r.jsxs)("div",{className:"flex w-full items-center pt-2 border-t border-gray-200 mt-2",children:[(0,r.jsx)("span",{className:"flex text-[#9a9a9a] font-bold",children:"Total a pagar"}),(0,r.jsxs)("span",{className:"flex ml-auto text-[#022953] text-2xl font-bold",children:[$.toFixed(2)," ","CU"===o?"CUP":"USD"]})]})]}),(0,r.jsx)("hr",{className:"flex h-px border-[#9a9a9a] w-full"}),(0,r.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)("span",{className:"flex text-[#9a9a9a]",children:"T\xfa"}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:"flex rounded-full bg-[#9a9a9a] w-12 h-12 items-center justify-center text-white p-1",children:(0,r.jsx)(m,{className:"flex w-full h-full"})}),(0,r.jsx)("span",{className:"flex text-[#9a9a9a]",children:"".concat(JSON.parse(localStorage.getItem("userData")||"{}").name||""," ").concat(JSON.parse(localStorage.getItem("userData")||"{}").last1||""," ").concat(JSON.parse(localStorage.getItem("userData")||"{}").last2||"")})]})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)("label",{className:"text-[#9a9a9a]",children:"N\xfamero de tel\xe9fono del receptor"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:"tel",value:F.phone,onChange:e=>{let a=e.target.value.replace(/[^0-9+\s-]/g,"");R({...F,phone:a})},placeholder:"Ej: 55555555 o +53 55555555",className:"w-full p-2 rounded-md border ".concat(U&&!z.phone&&F.phone?"border-red-500":"border-gray-300"," ").concat(F.phone?z.phone?"border-green-500":"border-red-500":""),required:!0}),F.phone&&(0,r.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:z.phone?(0,r.jsx)(x.A,{className:"h-5 w-5 text-green-500"}):(0,r.jsx)(p.A,{className:"h-5 w-5 text-red-500"})})]}),U&&!z.phone&&F.phone&&(0,r.jsx)("p",{className:"text-red-500 text-sm",children:"Por favor ingrese un n\xfamero de tel\xe9fono v\xe1lido"})]})]}),(0,r.jsx)("div",{className:"flex flex-col gap-4",children:(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)("label",{className:"text-[#9a9a9a]",children:"Carnet de identidad del receptor"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:"text",value:F.ci_cliente||"",onChange:e=>{let a=e.target.value.replace(/[^0-9A-Za-z]/g,"").toUpperCase();R({...F,ci_cliente:a})},placeholder:"Ej: 12345678901",className:"w-full p-2 rounded-md border ".concat(U&&!z.ci_cliente&&F.ci_cliente?"border-red-500":"border-gray-300"," ").concat(F.ci_cliente?z.ci_cliente?"border-green-500":"border-red-500":""),required:!0}),F.ci_cliente&&(0,r.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:z.ci_cliente?(0,r.jsx)(x.A,{className:"h-5 w-5 text-green-500"}):(0,r.jsx)(p.A,{className:"h-5 w-5 text-red-500"})})]}),U&&!z.ci_cliente&&F.ci_cliente&&(0,r.jsx)("p",{className:"text-red-500 text-sm",children:"Por favor ingrese un carnet de identidad v\xe1lido"})]})}),J.length>0&&(0,r.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"checkbox",id:"useSavedAddress",checked:A,onChange:()=>D(!A),className:"h-4 w-4 rounded border-gray-300 text-[#022953] focus:ring-[#022953]"}),(0,r.jsx)("label",{htmlFor:"useSavedAddress",className:"text-[#9a9a9a] cursor-pointer",children:"Usar una direcci\xf3n guardada"})]}),A&&(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)("label",{className:"text-[#9a9a9a]",children:"Selecciona una direcci\xf3n:"}),(0,r.jsx)("div",{className:"grid gap-2",children:J.map(e=>(0,r.jsxs)("div",{className:"p-3 border rounded-md cursor-pointer transition-colors ".concat(I===e.id?"border-[#022953] bg-blue-50":"border-gray-300 hover:border-gray-400"),onClick:()=>{L(e.id),R(a=>({...a,provincia:e.provincia,municipio:e.municipio,direccionExacta:e.direccion||""}))},children:[(0,r.jsx)("p",{className:"font-medium",children:e.direccion}),(0,r.jsxs)("p",{className:"text-sm",children:[e.municipio,", ",e.provincia]})]},e.id))})]})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-4 w-full ".concat(A&&J.length>0?"hidden":""),children:[J.length>0&&(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"O ingresa una direcci\xf3n manualmente:"}),(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)("label",{className:"text-[#9a9a9a]",children:"Provincia"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("select",{value:F.provincia,onChange:e=>R({...F,provincia:e.target.value,municipio:""}),className:"w-full p-2 rounded-md border ".concat(F.provincia?"border-green-500":"border-gray-300"),children:[(0,r.jsx)("option",{value:"",children:"Seleccione una provincia"}),Object.keys(g).map(e=>(0,r.jsx)("option",{value:e,children:e},e))]}),F.provincia&&(0,r.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:(0,r.jsx)(x.A,{className:"h-5 w-5 text-green-500"})})]})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)("label",{className:"text-[#9a9a9a]",children:"Municipio"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("select",{value:F.municipio,onChange:e=>R({...F,municipio:e.target.value}),className:"w-full p-2 rounded-md border ".concat(F.municipio?"border-green-500":"border-gray-300"),disabled:!F.provincia,children:[(0,r.jsx)("option",{value:"",children:"Seleccione un municipio"}),F.provincia&&g[F.provincia].map(e=>(0,r.jsx)("option",{value:e,children:e},e))]}),F.municipio&&(0,r.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:(0,r.jsx)(x.A,{className:"h-5 w-5 text-green-500"})})]})]})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-2 mt-4",children:[(0,r.jsxs)("label",{className:"flex items-center justify-between ".concat("La Habana"===F.provincia?"text-[#9a9a9a]":"text-gray-400"),children:[(0,r.jsxs)("span",{className:"flex items-center",children:["\xbfNecesitas entrega a domicilio?","La Habana"!==F.provincia&&(0,r.jsx)("span",{className:"text-xs ml-2",children:"(Disponible solo en La Habana)"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"checkbox",id:"deliveryCheckbox",checked:1===S,disabled:"La Habana"!==F.provincia,onChange:e=>{let a=e.target.checked;C(+!!a),P(!0),a?_(!0):R(e=>({...e,direccionExacta:""}))},className:"h-5 w-5 rounded border-gray-300 text-[#022953] focus:ring-[#022953] ".concat("La Habana"===F.provincia?"cursor-pointer":"cursor-not-allowed opacity-50")}),1===S&&"La Habana"===F.provincia&&(0,r.jsxs)("span",{className:"text-sm text-gray-600 whitespace-nowrap",children:["+$",V.toFixed(2)," ","CU"===o?"CUP":"USD"]})]})]}),1===S&&"La Habana"===F.provincia&&(0,r.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"*El precio puede variar seg\xfan la ubicaci\xf3n exacta. Nos pondremos en contacto contigo para confirmar el costo final."})]}),(!A||null===I)&&(0,r.jsx)("div",{className:"overflow-hidden transition-all duration-300 ease-in-out ".concat(1===S?"max-h-40 opacity-100":"max-h-0 opacity-0"),onTransitionEnd:()=>{0===S&&_(!1),P(!1)},style:{visibility:w||E?"visible":"hidden"},children:w&&(0,r.jsxs)("div",{className:"flex flex-col gap-2 w-full pt-2",children:[(0,r.jsx)("label",{className:"text-[#9a9a9a]",children:"Direcci\xf3n exacta"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("textarea",{value:F.direccionExacta||"",onChange:e=>R(a=>({...a,direccionExacta:e.target.value})),required:1===S,placeholder:"Escriba su direcci\xf3n completa aqu\xed (calle, n\xfamero, entre calles, edificio, apartamento, etc.)",className:"w-full p-2 min-h-20 bg-white placeholder:text-left text-left align-top rounded-md border focus:ring-2 focus:ring-[#022953] focus:border-transparent transition-all duration-200 ".concat(U&&1===S&&!F.direccionExacta?"border-red-500":F.direccionExacta?"border-green-500":"border-gray-300")}),F.direccionExacta&&(0,r.jsx)("div",{className:"absolute right-3 top-3",children:(0,r.jsx)(x.A,{className:"h-5 w-5 text-green-500"})})]}),U&&1===S&&!F.direccionExacta&&(0,r.jsx)("p",{className:"text-red-500 text-sm",children:"Por favor ingrese una direcci\xf3n de entrega v\xe1lida"})]})}),F.provincia&&F.municipio&&(0,r.jsx)("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-md",children:(0,r.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,r.jsx)("strong",{children:"Ubicaci\xf3n seleccionada:"})," ",F.municipio,", ",F.provincia,1===S&&F.direccionExacta&&(0,r.jsxs)("span",{className:"block mt-1",children:[(0,r.jsx)("strong",{children:"Direcci\xf3n de entrega:"})," ",F.direccionExacta]})]})}),(0,r.jsxs)("div",{className:"w-full mt-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Resumen del pedido"}),(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,r.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,r.jsx)("span",{children:"Subtotal:"}),(0,r.jsxs)("span",{children:["$",q.toFixed(2)," ","CU"===o?"CUP":"USD"]})]}),1===S&&(0,r.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,r.jsx)("span",{children:"Env\xedo:"}),(0,r.jsxs)("span",{children:["$",V.toFixed(2)," ","CU"===o?"CUP":"USD"]})]}),(0,r.jsx)("div",{className:"border-t border-gray-200 my-3"}),(0,r.jsxs)("div",{className:"flex justify-between font-medium",children:[(0,r.jsx)("span",{children:"Total:"}),(0,r.jsxs)("span",{children:["$",(q+(1===S?V:0)).toFixed(2)," ","CU"===o?"CUP":"USD"]})]})]})]}),(0,r.jsx)("div",{className:"hidden w-full h-full bg-blue-500/10 md:p-10 p-4 items-center justify-center text-center md:text-2xl rounded-md text-blue-900",children:"Lo sentimos, no se pueden hacer pedidos temporalmente"}),(0,r.jsx)("div",{className:"flex w-full justify-center",children:(0,r.jsx)("button",{onClick:Y,className:"flex w-full md:w-1/2 h-12 bg-[#022953] font-bold text-white items-center justify-center hover:text-lg transition-all duration-300 rounded-md",children:"Confirmar orden"})}),U&&k&&(0,r.jsx)("span",{className:"w-full bg-red-300 font-xs p-2 items-center text-center text-red-700 rounded-md",children:k})]})})}},5196:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(9946).A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},5237:(e,a,t)=>{"use strict";t.d(a,{_:()=>r});let r=(0,t(5453).v)((e,a)=>({amount:0,setAmount:a=>e({amount:a})}))},5695:(e,a,t)=>{"use strict";var r=t(8999);t.o(r,"usePathname")&&t.d(a,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(a,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(a,{useSearchParams:function(){return r.useSearchParams}})},6654:(e,a,t)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"useMergedRef",{enumerable:!0,get:function(){return s}});let r=t(2115);function s(e,a){let t=(0,r.useRef)(null),s=(0,r.useRef)(null);return(0,r.useCallback)(r=>{if(null===r){let e=t.current;e&&(t.current=null,e());let a=s.current;a&&(s.current=null,a())}else e&&(t.current=i(e,r)),a&&(s.current=i(a,r))},[e,a])}function i(e,a){if("function"!=typeof e)return e.current=a,()=>{e.current=null};{let t=e(a);return"function"==typeof t?t:()=>e(null)}}("function"==typeof a.default||"object"==typeof a.default&&null!==a.default)&&void 0===a.default.__esModule&&(Object.defineProperty(a.default,"__esModule",{value:!0}),Object.assign(a.default,a),e.exports=a.default)},7712:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(9946).A)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]])},9474:(e,a,t)=>{"use strict";t.d(a,{d:()=>r});let r=(0,t(5453).v)(e=>({object:null,setObject:a=>e({object:a})}))}},e=>{var a=a=>e(e.s=a);e.O(0,[805,441,684,358],()=>a(3476)),_N_E=e.O()}]);