(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[314],{1138:(e,t,a)=>{Promise.resolve().then(a.bind(a,4033))},3052:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},4033:(e,t,a)=>{"use strict";a.d(t,{default:()=>u});var s=a(5155),r=a(2115),i=a(760),l=a(1471),n=a(9946);let c=(0,n.A)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),d=(0,n.A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),o=(0,n.A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);var m=a(7108);let x=(0,n.A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var h=a(3052);let p=(0,n.A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),y=(0,n.A)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),g=(0,n.A)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);function u(){let[e,t]=(0,r.useState)([]),[a,n]=(0,r.useState)({}),[u,b]=(0,r.useState)("CUP"),[f,j]=(0,r.useState)("CU"),[N,w]=(0,r.useState)([{value:1},{value:1}]),[v,k]=(0,r.useState)(1),[C]=(0,r.useState)(5),[S,A]=(0,r.useState)(!0),[P,E]=(0,r.useState)({}),[_,M]=(0,r.useState)({}),[O,z]=(0,r.useState)(null),[I,q]=(0,r.useState)(null);(0,r.useEffect)(()=>{T(),D()},[]);let T=async()=>{A(!0);try{let e=JSON.parse(localStorage.getItem("userData")||"{}"),a=await fetch("".concat("https://app.fadiar.com/api","/pedidos_manager"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_manager:e.userId,managerId:e.userId})}),s=await a.json();t(s),console.log(s),s.slice(0,C).forEach(e=>U(e.id))}catch(e){console.error("Error al obtener pedidos:",e)}finally{A(!1)}},U=async e=>{E(t=>({...t,[e]:!0}));try{let t=JSON.parse(localStorage.getItem("userData")||"{}"),a=await fetch("".concat("https://app.fadiar.com/api","/getOrder"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_user_action:t.userId,id_order:e})}),s=await a.json();n(t=>({...t,[e]:s.products||[]}))}catch(e){console.error("Error al obtener detalles del pedido:",e)}finally{E(t=>({...t,[e]:!1}))}},D=async()=>{try{let e=await fetch("https://app.fadiar.com/api/get_location",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})}),t=await e.json();console.log(t),t.country,j(t.country),b("USD")}catch(e){console.error("Error detecting country:",e)}},J=e=>{switch(e){case -1:return"bg-red-100 text-red-800 border-red-200";case 0:return"bg-blue-100 text-blue-800 border-blue-200";case 1:return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},L=e=>{switch(e){case -1:return(0,s.jsx)(c,{className:"w-4 h-4"});case 0:return(0,s.jsx)(d,{className:"w-4 h-4"});case 1:return(0,s.jsx)(o,{className:"w-4 h-4"});default:return(0,s.jsx)(m.A,{className:"w-4 h-4"})}},V=e=>{switch(e){case -1:return"Cancelada";case 0:return"En espera";case 1:return"Aceptado";default:return"Desconocido"}},H=e=>{let t=e.prices.find(e=>"CUP"===e[2]),a=e.prices.find(e=>"USD"===e[2]);return"CU"===f&&t?"".concat(t[1]," CUP"):"CU"!==f&&a?"".concat(a[1]," USD"):"Precio no disponible"},B=v*C,F=B-C,R=e.slice(F,B),W=Math.ceil(e.length/C),$=t=>{k(t);let s=(t-1)*C;e.slice(s,s+C).forEach(e=>{a[e.id]||U(e.id)})},X=e=>{q(e)},Z=async()=>{if(I)try{M(e=>({...e,[I]:!0})),z(null);let e=JSON.parse(localStorage.getItem("userData")||"{}");if(!(await fetch("".concat("https://app.fadiar.com/api","/denegar_pedido"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_user_action:e.userId,id_order:I,id_manager:e.userId})})).ok)throw Error("No se pudo cancelar el pedido. Intente nuevamente.");t(e=>e.map(e=>e.id===I?{...e,state:-1}:e)),q(null)}catch(e){console.error("Error al cancelar el pedido:",e),z(e instanceof Error?e.message:"Error al cancelar el pedido")}finally{M(e=>({...e,[I]:!1}))}};if(S)return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,s.jsxs)(l.P.div,{className:"text-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(0,s.jsx)("div",{className:"w-12 h-12 border-2 border-gray-200 border-t-gray-600 rounded-full animate-spin mx-auto mb-3"}),(0,s.jsx)("div",{className:"text-gray-600 font-medium",children:"Cargando tus pedidos..."})]})});if(0===e.length)return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",children:(0,s.jsxs)("div",{className:"text-center max-w-md p-8 bg-white rounded-lg shadow-lg",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-[#022953] mb-4",children:"No tienes pedidos a\xfan"}),(0,s.jsx)("p",{className:"text-gray-600 mb-6",children:"A\xfan no has realizado ning\xfan pedido. Explora nuestros productos y encuentra lo que necesitas."}),(0,s.jsx)("button",{onClick:()=>window.location.href="/products",className:"w-full bg-[#022953] text-white font-bold py-3 px-6 rounded hover:bg-opacity-90 transition-colors",children:"Ver productos"})]})});let G=()=>(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 p-4 bg-white border-b border-gray-100 last:border-b-0 animate-pulse",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)("div",{className:"w-24 h-24 sm:w-32 sm:h-32 bg-gray-200 rounded"})}),(0,s.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),(0,s.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})]});return(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,s.jsxs)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Mis Pedidos"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Historial de todas tus compras"})]}),0===e.length?(0,s.jsxs)(l.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},className:"text-center py-16",children:[(0,s.jsx)(m.A,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-600 mb-1",children:"No tienes pedidos a\xfan"}),(0,s.jsx)("p",{className:"text-gray-500 text-sm",children:"Cuando realices tu primera compra, aparecer\xe1 aqu\xed"})]}):(0,s.jsxs)(s.Fragment,{children:[W>1&&(0,s.jsxs)(l.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:"flex flex-col sm:flex-row items-center justify-center gap-2 mb-6 px-2",children:[(0,s.jsxs)("button",{onClick:()=>$(v-1),disabled:1===v,className:"flex items-center gap-1 px-2 sm:px-3 py-2 text-xs sm:text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[(0,s.jsx)(x,{className:"w-3 h-3 sm:w-4 sm:h-4"}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Anterior"})]}),(0,s.jsx)("div",{className:"flex gap-1 flex-wrap justify-center",children:Array.from({length:W},(e,t)=>t+1).map(e=>(0,s.jsx)("button",{onClick:()=>$(e),className:"px-2 sm:px-3 py-2 text-xs sm:text-sm font-medium rounded-lg transition-colors ".concat(v===e?"bg-blue-600 text-white":"text-gray-500 bg-white border border-gray-300 hover:bg-gray-50"),children:e},e))}),(0,s.jsxs)("button",{onClick:()=>$(v+1),disabled:v===W,className:"flex items-center gap-1 px-2 sm:px-3 py-2 text-xs sm:text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[(0,s.jsx)("span",{className:"hidden sm:inline",children:"Siguiente"}),(0,s.jsx)(h.A,{className:"w-3 h-3 sm:w-4 sm:h-4"})]})]}),e.length>0&&(0,s.jsxs)(l.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"text-center mb-6 text-sm text-gray-500",children:["Mostrando ",F+1," a ",Math.min(B,e.length)," de ",e.length," pedidos"]}),(0,s.jsx)("div",{className:"space-y-6",children:(0,s.jsx)(i.N,{mode:"wait",children:R.map((e,t)=>(0,s.jsxs)(l.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3,delay:.05*t},className:"bg-white rounded-lg border border-gray-200 overflow-hidden hover:border-gray-300 transition-colors",children:[(0,s.jsx)("div",{className:"text-white p-6",style:{background:"linear-gradient(90deg, #011d30, #1a2d52)"},children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"p-2 rounded-full bg-white/10",children:L(e.state)}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("span",{className:"font-semibold text-lg",children:["Pedido #",e.id]}),(0,s.jsx)("span",{className:"flex items-center justify-center text-center px-3 py-1 rounded-full text-xs font-medium ".concat(J(e.state)),style:{display:"flex",justifyContent:"center"},children:V(e.state)}),0===e.state&&(0,s.jsx)("button",{onClick:t=>{t.stopPropagation(),X(e.id)},disabled:_[e.id],className:"px-3 py-1 text-xs font-medium rounded-full bg-red-100 text-red-800 border border-red-200 hover:bg-red-200 transition-colors ".concat(_[e.id]?"opacity-70 cursor-not-allowed":""),children:_[e.id]?"Cancelando...":"Cancelar pedido"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-300 mt-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(p,{className:"w-4 h-4"}),e.date.split(" ")[0]]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(d,{className:"w-4 h-4"}),e.date.split(" ")[1]]})]})]})]}),e.direccionExacta&&(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[(0,s.jsx)(y,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"truncate max-w-xs",children:e.direccionExacta})]}),(0,s.jsxs)("span",{className:"md:ml-16",children:["Tel\xe9fono del cliente: ",e.client_cell]}),(0,s.jsxs)("span",{children:["Carnet de identidad del cliente: ","".concat(e.client_ci).padStart(11,"0")]})]})}),(0,s.jsx)("div",{className:"p-6",children:P[e.id]?(0,s.jsx)("div",{className:"space-y-4",children:[1,2,3].map(e=>(0,s.jsx)(G,{},e))}):a[e.id]?(0,s.jsx)("div",{className:"space-y-4",children:a[e.id].map((e,t)=>(0,s.jsxs)(l.P.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{duration:.2,delay:.05*t},className:"flex flex-col sm:flex-row gap-4 p-4 bg-white border-b border-gray-100 last:border-b-0 hover:bg-gray-50 transition-colors",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)("img",{src:"".concat("https://app.fadiar.com/api","/").concat(e.img),alt:e.name,className:"w-24 h-24 sm:w-32 sm:h-32 object-cover rounded-lg shadow-md",onError:e=>{e.target.style.display="none"}})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2 line-clamp-2",children:e.name}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,s.jsx)(g,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"font-medium",children:H(e)})]})]})]},t))}):(0,s.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,s.jsx)(m.A,{className:"w-12 h-12 mx-auto mb-2 text-gray-300"}),(0,s.jsx)("p",{children:"No se pudieron cargar los productos"})]})})]},e.id))})}),W>1&&(0,s.jsxs)(l.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:"flex flex-col sm:flex-row items-center justify-center gap-2 mt-8 px-2",children:[(0,s.jsxs)("button",{onClick:()=>$(v-1),disabled:1===v,className:"flex items-center gap-1 px-2 sm:px-3 py-2 text-xs sm:text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[(0,s.jsx)(x,{className:"w-3 h-3 sm:w-4 sm:h-4"}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Anterior"})]}),(0,s.jsx)("div",{className:"flex gap-1 flex-wrap justify-center",children:Array.from({length:W},(e,t)=>t+1).map(e=>(0,s.jsx)("button",{onClick:()=>$(e),className:"px-2 sm:px-3 py-2 text-xs sm:text-sm font-medium rounded-lg transition-colors ".concat(v===e?"bg-blue-600 text-white":"text-gray-500 bg-white border border-gray-300 hover:bg-gray-50"),children:e},e))}),(0,s.jsxs)("button",{onClick:()=>$(v+1),disabled:v===W,className:"flex items-center gap-1 px-2 sm:px-3 py-2 text-xs sm:text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[(0,s.jsx)("span",{className:"hidden sm:inline",children:"Siguiente"}),(0,s.jsx)(h.A,{className:"w-3 h-3 sm:w-4 sm:h-4"})]})]}),e.length>0&&(0,s.jsxs)(l.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"text-center mt-4 text-sm text-gray-500",children:["Mostrando ",F+1," a ",Math.min(B,e.length)," de ",e.length," pedidos"]})]}),(0,s.jsx)(i.N,{children:null!==I&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50",onClick:()=>q(null)}),(0,s.jsxs)(l.P.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-white rounded-xl shadow-xl z-50 w-full max-w-md p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-gray-800",children:"Confirmar cancelaci\xf3n"}),(0,s.jsx)("button",{onClick:()=>q(null),className:"text-gray-500 hover:text-gray-700 transition-colors",children:(0,s.jsx)(c,{className:"w-6 h-6"})})]}),(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsxs)("p",{className:"text-gray-700",children:["\xbfEst\xe1 seguro que desea cancelar el pedido #",I,"? Esta acci\xf3n no se puede deshacer."]})}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,s.jsx)("button",{onClick:()=>q(null),disabled:_[I],className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-50",children:"Volver"}),(0,s.jsx)("button",{onClick:Z,disabled:_[I],className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 flex items-center",children:_[I]?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Cancelando..."]}):"S\xed, cancelar pedido"})]})]})]})}),(0,s.jsx)(i.N,{children:O&&(0,s.jsx)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"fixed bottom-6 right-6 bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-lg shadow-lg z-50 max-w-sm",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(c,{className:"h-5 w-5 mr-2"}),(0,s.jsx)("p",{className:"font-medium",children:O}),(0,s.jsx)("button",{onClick:()=>z(null),className:"ml-4 text-red-500 hover:text-red-700",children:(0,s.jsx)(c,{className:"h-5 w-5"})})]})})})]})})}},7108:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]])},9946:(e,t,a)=>{"use strict";a.d(t,{A:()=>c});var s=a(2115);let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(0,s.forwardRef)((e,t)=>{let{color:a="currentColor",size:r=24,strokeWidth:n=2,absoluteStrokeWidth:c,className:d="",children:o,iconNode:m,...x}=e;return(0,s.createElement)("svg",{ref:t,...l,width:r,height:r,stroke:a,strokeWidth:c?24*Number(n)/Number(r):n,className:i("lucide",d),...x},[...m.map(e=>{let[t,a]=e;return(0,s.createElement)(t,a)}),...Array.isArray(o)?o:[o]])}),c=(e,t)=>{let a=(0,s.forwardRef)((a,l)=>{let{className:c,...d}=a;return(0,s.createElement)(n,{ref:l,iconNode:t,className:i("lucide-".concat(r(e)),c),...d})});return a.displayName="".concat(e),a}}},e=>{var t=t=>e(e.s=t);e.O(0,[676,441,684,358],()=>t(1138)),_N_E=e.O()}]);