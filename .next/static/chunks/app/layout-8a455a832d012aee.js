(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{347:()=>{},1242:(e,t,s)=>{"use strict";s.d(t,{default:()=>O});var r=s(5155),a=s(6766),n=s(6874),l=s.n(n),i=s(5695),o=s(4416),c=s(7924),d=s(2115),h=s(3546),u=s(9434),m=s(760),x=s(1471);function f(e,t){let s=(0,u.f)(e),r=(0,u.f)(t),a=function(e,t){let s=e.length,r=t.length,a=Array(s+1).fill(null).map(()=>Array(r+1).fill(0));for(let e=0;e<=s;e++)a[e][0]=e;for(let e=0;e<=r;e++)a[0][e]=e;for(let n=1;n<=s;n++)for(let s=1;s<=r;s++)e[n-1]===t[s-1]?a[n][s]=a[n-1][s-1]:a[n][s]=Math.min(a[n-1][s]+1,a[n][s-1]+1,a[n-1][s-1]+1);return a[s][r]}(s,r),n=Math.max(s.length,r.length);return 0===n?1:(n-a)/n}function p(e,t){let s=(0,u.f)(e),r=(0,u.f)(t);if(s===r)return 1;let a=0,n=Math.max(s.length,r.length);for(let e=0;e<Math.min(s.length,r.length);e++)s[e]===r[e]&&a++;return 0===n?1:a/n}function g(){let[e,t]=(0,d.useState)(""),[s,a]=(0,d.useState)([]),[n,l]=(0,d.useState)(!1),[g,j]=(0,d.useState)(!1),[v,w]=(0,d.useState)([]),b=(0,d.useRef)(null),N=(0,i.useRouter)(),y=(0,h.R)(e=>e.setName);(0,d.useEffect)(()=>{(async()=>{try{let e=await fetch("".concat("https://app.fadiar.com/api","/inventory")),t=await e.json();w(t.products||[])}catch(e){console.error("Error cargando productos:",e)}})()},[]),(0,d.useEffect)(()=>{let e=e=>{b.current&&!b.current.contains(e.target)&&l(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,d.useEffect)(()=>{if(e.length<2){a([]),l(!1);return}let t=(0,u.f)(e),s=v.map(e=>{var s,r;let a=(0,u.f)("".concat(e.name," ").concat(e.brand," ").concat(e.model," ").concat(e.description)),n=(null===(s=e.categoria)||void 0===s?void 0:s.name)?(0,u.f)(e.categoria.name):"",l="".concat(a," ").concat(n),i=+!!l.includes(t),o=function(e,t){let s=(0,u.f)(e),r=(0,u.f)(t);if(r.includes(s))return s.length/r.length;let a=s.split(/\s+/),n=r.split(/\s+/),l=0;for(let e of a){let t=0;for(let s of n)s.includes(e)&&(t=Math.max(t,e.length/s.length));l+=t}return l/a.length}(t,l),c=f(t,l),d=p(t,l),h=0;return i>0&&(h+=100),h+=100*function(e,t){let s=(0,u.f)(e),r=(0,u.f)(t);return s===r?1:r.includes(s)?.9:s.includes(r)?.7:.7*f(s,r)+.3*p(s,r)}(t,e.name),h+=25*f(t,(0,u.f)(e.brand))+30*o+20*c+15*d,(null===(r=e.categoria)||void 0===r?void 0:r.name)&&(h+=15*f(t,(0,u.f)(e.categoria.name)),(0,u.f)(e.categoria.name).includes(t)&&(h+=20)),{product:e,score:h}}).filter(e=>e.score>.1).sort((e,t)=>t.score-e.score).slice(0,5).map(e=>e.product);a(s),l(s.length>0)},[e,v]),(0,d.useEffect)(()=>{let t=setTimeout(()=>{e.length>=2?(y((0,u.f)(e)),N.push("/products")):0===e.length&&y("")},500);return()=>clearTimeout(t)},[e,y,N]);let k=()=>{y((0,u.f)(e)),l(!1),N.push("/products")},C=e=>{t(e.name),y((0,u.f)(e.name)),l(!1),N.push("/products")};return(0,r.jsxs)("div",{ref:b,className:"relative flex z-10 w-full items-center text-white lg:mx-20 md:mx-10 border-b-2 focus-within:border-blue-500 transition-colors duration-300",children:[(0,r.jsx)("input",{type:"text",placeholder:"Buscar productos...",className:"w-full h-8 outline-none bg-transparent",value:e,onChange:e=>t(e.target.value),onKeyDown:e=>{"Enter"===e.key&&k()},onFocus:()=>e.length>=2&&l(!0)}),e&&(0,r.jsx)("button",{onClick:()=>{t(""),a([]),l(!1),y("")},className:"p-1 hover:bg-white/10 rounded-full transition-colors",children:(0,r.jsx)(o.A,{size:16})}),(0,r.jsx)("button",{onClick:k,className:"p-1 hover:bg-white/10 rounded-full transition-colors",children:(0,r.jsx)(c.A,{size:20})}),(0,r.jsx)(m.N,{children:n&&s.length>0&&(0,r.jsx)(x.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute top-full left-0 right-0 mt-1 bg-white rounded-lg shadow-lg border border-gray-200 max-h-80 overflow-y-auto z-50",children:s.map((e,t)=>{var s;return(0,r.jsxs)(x.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.05*t},onClick:()=>C(e),className:"flex items-center p-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-gray-200 rounded-lg flex-shrink-0 mr-3 overflow-hidden",children:e.img&&(0,r.jsx)("img",{src:"".concat("https://app.fadiar.com/api","/").concat(e.img),alt:e.name,className:"w-full h-full object-cover",onError:e=>{e.target.style.display="none"}})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("div",{className:"text-sm font-medium text-gray-900 truncate",children:e.name}),(0,r.jsxs)("div",{className:"text-xs text-gray-500 truncate",children:[e.brand," • ",e.model]}),(null===(s=e.categoria)||void 0===s?void 0:s.name)&&(0,r.jsxs)("div",{className:"text-xs text-blue-600 font-medium",children:["\uD83D\uDCC2 ",e.categoria.name]})]})]},e.id)})})})]})}var j=s(6474),v=s(3052),w=s(4783),b=s(5237),N=s(7809),y=s(7340),k=s(4835),C=s(1007),E=s(7108),S=s(306),A=s(5517),P=s(4653);let _=()=>{localStorage.removeItem("userData"),window.dispatchEvent(new Event("userDataChanged"))};function D(){let[e,t]=(0,d.useState)(!1),[s,a]=(0,d.useState)([]),[n,c]=(0,d.useState)([]),[u,f]=(0,d.useState)(!1),p=(0,b._)(e=>e.setAmount),{amount:g}=(0,b._)(),[D,I]=(0,d.useState)(null),L=(0,h.R)(e=>e.setCategory),M=(0,i.useRouter)(),z=async()=>{try{let e=await fetch("https://app.fadiar.com/api/get_categories_tree");if(!e.ok)throw Error("Error al cargar categor\xedas");let t=await e.json();a(t)}catch(e){console.error("Error fetching categories:",e)}},O=async()=>{let e=JSON.parse(localStorage.getItem("userData")||"{}");if(!e)return console.log("No tengo datos"),{};try{let t=JSON.stringify({id_user_action:e.userId,id_user:e.userId,comisiones:!1}),s=await fetch("".concat("https://app.fadiar.com/api","/obtener_productos_carrito"),{method:"POST",headers:{"Content-Type":"application/json"},body:t});if(!s.ok)throw Error("Error al cargar el carrito");let r=await s.json();return p(r.carrito.reduce((e,t)=>e+t.en_carrito,0)),r}catch(e){console.log(e)}};(0,d.useEffect)(()=>{O(),z()},[]),(0,d.useEffect)(()=>{let e=()=>{I(localStorage.getItem("userData"))};e();let t=t=>{"userData"===t.key&&e()},s=()=>{e()};return window.addEventListener("storage",t),window.addEventListener("userDataChanged",s),()=>{window.removeEventListener("storage",t),window.removeEventListener("userDataChanged",s)}},[]);let R=e=>{c(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},F=e=>{L(e),t(!1),M.push("/products")},J=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.map(e=>(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsxs)("div",{className:"flex w-full space-x-2 items-center cursor-pointer hover:bg-gray-50 p-2 rounded-md transition-colors ".concat(t>0?"ml-4":""),onClick:()=>{e.hijos&&e.hijos.length>0?R(e.id):F(e.name)},children:[e.hijos&&e.hijos.length>0?(0,r.jsx)("span",{className:"w-4 h-4",children:n.includes(e.id)?(0,r.jsx)(j.A,{className:"w-4 h-4"}):(0,r.jsx)(v.A,{className:"w-4 h-4"})}):(0,r.jsx)("span",{className:"w-4 h-4"}),(0,r.jsx)("span",{className:"flex-1",children:e.name})]}),e.hijos&&e.hijos.length>0&&n.includes(e.id)&&(0,r.jsx)("div",{className:"ml-4 border-l border-gray-200",children:J(e.hijos,t+1)})]},e.id))};return(0,r.jsxs)(r.Fragment,{children:[D&&(0,r.jsxs)(l(),{href:"/checkout",className:"relative w-6 h-6 sm:hidden hover:scale-125 duration-300",children:[(0,r.jsx)(N.A,{}),g>0&&(0,r.jsx)("div",{className:"absolute -right-2 -top-4 px-1 bg-red-300 text-red-700 rounded-md",children:g})]}),(0,r.jsxs)("div",{className:"flex sm:hidden",children:[(0,r.jsx)("button",{className:"w-6 h-6 hover:scale-125 duration-300",onClick:()=>t(!e),children:(0,r.jsx)(w.A,{})}),(0,r.jsx)(m.N,{children:e&&(0,r.jsxs)(x.P.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",stiffness:300,damping:30},className:"flex flex-col fixed top-0 right-0 bg-white rounded-l-lg h-screen w-[80vw] p-4 text-[#022953] space-y-4 text-base z-50 overflow-y-auto",children:[(0,r.jsxs)("div",{className:"flex w-full",children:[(0,r.jsx)("h3",{className:"text-xl font-bold",children:"Men\xfa"}),(0,r.jsx)("button",{className:"ml-auto w-6 h-6",onClick:()=>t(!1),children:(0,r.jsx)(o.A,{})})]}),(0,r.jsx)("hr",{className:"border-1 border-gray-200"}),(0,r.jsxs)(l(),{href:"/",className:"flex w-full space-x-2",onClick:()=>t(!1),children:[(0,r.jsx)("span",{children:(0,r.jsx)(y.A,{})}),(0,r.jsx)("span",{children:"Inicio"})]}),(0,r.jsx)("hr",{className:"border-1 border-gray-200"}),D&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(l(),{href:"/",className:"flex w-full space-x-2",onClick:()=>_(),children:[(0,r.jsx)("span",{children:(0,r.jsx)(k.A,{})}),(0,r.jsx)("span",{children:"Cerrar sesi\xf3n"})]}),(0,r.jsxs)(l(),{href:"/account",className:"flex w-full space-x-2",onClick:()=>t(!1),children:[(0,r.jsx)("span",{children:(0,r.jsx)(C.A,{})}),(0,r.jsx)("span",{children:"Mi cuenta"})]}),(0,r.jsxs)(l(),{href:"/record?id=".concat(JSON.parse(localStorage.getItem("userData")||"{}").userId||null),className:"flex w-full space-x-2",onClick:()=>t(!1),children:[(0,r.jsx)("span",{children:(0,r.jsx)(E.A,{})}),(0,r.jsx)("span",{children:"Mis pedidos"})]})]}),!D&&(0,r.jsxs)(l(),{href:"/login",className:"flex w-full space-x-2",onClick:()=>t(!1),children:[(0,r.jsx)("span",{children:(0,r.jsx)(S.A,{})}),(0,r.jsx)("span",{children:"Iniciar sesi\xf3n"})]}),(0,r.jsx)("hr",{className:"border-1 border-gray-200"}),(0,r.jsxs)(l(),{href:"/products",className:"flex w-full space-x-2",onClick:()=>{t(!1),L("")},children:[(0,r.jsx)("span",{children:(0,r.jsx)(A.A,{})}),(0,r.jsx)("span",{children:"Productos"})]}),(0,r.jsxs)("div",{className:"flex w-full space-x-2 items-center font-semibold text-[#022953] cursor-pointer hover:bg-gray-50 rounded-md transition-colors",onClick:()=>f(!u),children:[(0,r.jsx)("span",{children:(0,r.jsx)(P.A,{})}),(0,r.jsx)("span",{className:"flex-1",children:"Categor\xedas"}),(0,r.jsx)("span",{className:"w-4 h-4",children:u?(0,r.jsx)(j.A,{className:"w-4 h-4"}):(0,r.jsx)(v.A,{className:"w-4 h-4"})})]}),(0,r.jsx)(m.N,{children:u&&(0,r.jsx)(x.P.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"space-y-1 overflow-hidden h-full overflow-y-auto categories-scroll",children:J(s)})}),D&&(0,r.jsxs)(l(),{href:"/checkout",className:"flex w-full space-x-2",onClick:()=>t(!1),children:[(0,r.jsx)("span",{children:(0,r.jsx)(N.A,{})}),(0,r.jsx)("span",{children:"Carrito"})]})]})})]})]})}var I=s(6827);let L=()=>{localStorage.removeItem("userData"),window.dispatchEvent(new Event("userDataChanged"))};function M(){let[e,t]=(0,d.useState)(!1),s=(0,d.useRef)(null),a=(0,d.useRef)(null);return(0,d.useEffect)(()=>{let r=e=>{s.current&&!s.current.contains(e.target)&&a.current&&!a.current.contains(e.target)&&t(!1)};return e&&document.addEventListener("click",r),()=>{document.removeEventListener("click",r)}},[e]),(0,r.jsxs)("div",{className:"hidden sm:block",children:[(0,r.jsx)("button",{ref:s,onClick:()=>t(!e),className:"hover:scale-125 duration-300",children:(0,r.jsx)(C.A,{})}),(0,r.jsx)(m.N,{children:e&&(0,r.jsxs)(x.P.div,{ref:a,initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-10},transition:{duration:.2},className:"flex flex-col absolute right-12 top-16 bg-white rounded-md shadow-lg p-4 w-48 text-[#022953] space-y-4",children:[(0,r.jsxs)("div",{className:"flex h-full items-center space-x-2 hover:scale-110 transition-all duration-300",children:[(0,r.jsx)(I.A,{}),(0,r.jsx)(l(),{href:"/account",children:"Mi cuenta"})]}),(0,r.jsxs)(l(),{href:"/",className:"flex items-center space-x-2 hover:scale-110 transition-all duration-300",onClick:L,children:[(0,r.jsx)(k.A,{}),(0,r.jsx)("span",{children:"Cerrar sesi\xf3n"})]})]})})]})}function z(){let[e,t]=(0,d.useState)(null),s=(0,b._)(e=>e.setAmount),{amount:a}=(0,b._)(),n=(0,i.usePathname)(),o=(0,h.R)(e=>e.setCategory),c=async()=>{let e=JSON.parse(localStorage.getItem("userData")||"{}");if(!e)return console.log("No tengo datos"),{};try{let t=JSON.stringify({id_user_action:e.userId,id_user:e.userId,comisiones:!1}),r=await fetch("".concat("https://app.fadiar.com/api","/obtener_productos_carrito"),{method:"POST",headers:{"Content-Type":"application/json"},body:t});if(!r.ok)throw Error("Error al cargar el carrito");let a=await r.json();return s(a.carrito.reduce((e,t)=>e+t.en_carrito,0)),a}catch(e){console.log(e)}};return(0,d.useEffect)(()=>{c()},[]),(0,d.useEffect)(()=>{let e=()=>{t(localStorage.getItem("userData"))};e();let s=t=>{"userData"===t.key&&e()},r=()=>{e()};return window.addEventListener("storage",s),window.addEventListener("userDataChanged",r),()=>{window.removeEventListener("storage",s),window.removeEventListener("userDataChanged",r)}},[]),(0,r.jsx)("div",{className:"flex z-10 h-full items-center justify-end text-white space-x-4 text-sm",children:e?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l(),{href:"/",className:"hidden sm:block relative hover:text-blue-500 hover:underline transition-colors ".concat("/"===n?"font-bold":""),children:"Inicio"}),(0,r.jsx)(l(),{href:"/products",onClick:()=>o(""),className:"hidden sm:block relative hover:text-blue-500 hover:underline transition-colors ".concat(n.startsWith("/products")?"font-bold":""),children:"Productos"}),(0,r.jsxs)(l(),{href:"/checkout",className:"hidden sm:block relative hover:text-blue-500 hover:underline transition-colors ".concat("/checkout/"===n?"font-bold":""),children:["Carrito",a>0&&(0,r.jsx)("div",{className:"absolute -right-2 -top-4 px-1 bg-red-300 text-red-700 rounded-md",children:a})]}),(0,r.jsx)(l(),{href:"/record?id=".concat(JSON.parse(localStorage.getItem("userData")||"{}").userId||null),className:"hidden sm:block whitespace-nowrap hover:text-blue-500 hover:underline transition-colors ".concat(n.startsWith("/record")?"font-bold":""),children:"Mis Pedidos"}),(0,r.jsx)(M,{})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l(),{href:"/",className:"hidden sm:block relative hover:text-blue-500 hover:underline transition-colors ".concat("/"===n?"font-bold":""),children:"Inicio"}),(0,r.jsx)(l(),{href:"/products",className:"hidden sm:block relative hover:text-blue-500 hover:underline transition-colors ".concat(n.startsWith("/products")?"font-bold":""),children:"Productos"}),(0,r.jsx)(l(),{href:"/login",className:"hidden sm:block hover:text-blue-500 hover:underline transition-colors whitespace-nowrap ".concat("/login"===n?"font-bold":""),children:"Iniciar sesi\xf3n"})]})})}function O(){let e=(0,i.usePathname)();return["/login","/register","/recovery","/verify"].includes(e.endsWith("/")&&"/"!==e?e.slice(0,-1):e)?null:(0,r.jsxs)("header",{className:"w-full sticky top-0 left-0 z-50",children:[(0,r.jsx)("div",{className:"absolute inset-0 w-full h-full z-0",style:{background:"linear-gradient(90deg, #011d30, #1a2d52)"}}),(0,r.jsxs)("div",{className:"relative flex w-full h-22 px-4 sm:px-8 space-x-4 lg:space-x-8 items-center z-10",children:[(0,r.jsxs)(l(),{href:"/",className:"flex h-full items-center md:p-0 py-2",children:[(0,r.jsx)(a.default,{src:"/logo.png",alt:"logo",width:200,height:200,className:"hidden md:block"}),(0,r.jsx)(a.default,{src:"/favicon.png",alt:"logo",width:60,height:60,className:"md:hidden"})]}),(0,r.jsx)(g,{}),(0,r.jsxs)("div",{className:"flex h-full items-center justify-end text-white space-x-4 text-sm ml-auto",children:[(0,r.jsx)(z,{}),(0,r.jsx)(D,{})]})]})]})}},2584:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,6874,23)),Promise.resolve().then(s.t.bind(s,3063,23)),Promise.resolve().then(s.t.bind(s,2093,23)),Promise.resolve().then(s.t.bind(s,7735,23)),Promise.resolve().then(s.t.bind(s,347,23)),Promise.resolve().then(s.bind(s,1242)),Promise.resolve().then(s.bind(s,5881))},3546:(e,t,s)=>{"use strict";s.d(t,{R:()=>r});let r=(0,s(5453).v)(e=>({name:"",brand:"",category:"",available:"",minPrice:0,maxPrice:1e6,setName:t=>e({name:t}),setBrand:t=>e({brand:t}),setCategory:t=>e({category:t}),setAvailable:t=>e({available:t}),setMinPrice:t=>e({minPrice:t}),setMaxPrice:t=>e({maxPrice:t})}))},5237:(e,t,s)=>{"use strict";s.d(t,{_:()=>r});let r=(0,s(5453).v)((e,t)=>({amount:0,setAmount:t=>e({amount:t})}))},5881:(e,t,s)=>{"use strict";s.d(t,{AuthProvider:()=>n});var r=s(5155),a=s(2108);function n(e){let{children:t}=e;return(0,r.jsx)(a.SessionProvider,{children:t})}},9434:(e,t,s)=>{"use strict";s.d(t,{cn:()=>n,d:()=>i,f:()=>l});var r=s(2596),a=s(9688);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.QP)((0,r.$)(t))}function l(e){return e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[ñ]/g,"n").replace(/[ü]/g,"u").replace(/[ç]/g,"c").replace(/[ß]/g,"ss").replace(/[æ]/g,"ae").replace(/[œ]/g,"oe").replace(/[^a-z0-9\s]/g,"").replace(/\s+/g," ").trim()}function i(e,t){let s=l(e);return l(t).includes(s)}}},e=>{var t=t=>e(e.s=t);e.O(0,[360,874,277,676,805,596,441,684,358],()=>t(2584)),_N_E=e.O()}]);